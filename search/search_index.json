{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to the HDRUK Avoidable Admissions Collaboration Docs This is a the web-guide to help facilitate federated data engineering across each site. CI Site: Sheffield Site Main Sections index - This navigation page documentation - Partial documentation for the project. Please see the main Sheffield protocol for further details. The aim of this documentation is to encourage co-development data_models - Contains the core data model for the project guides - How to guides taking beginners through the process of setting up and running the pipeline. code - Explains the code modules for the project for those who want more details. Common Analytic Approach To facilitate successful working across all involved sites a common approach needs to be taken. This has been well described as below in the following diagram: As you can see in the diagram there are 3 major steps to the process which are: Data Extraction Data Harmonization Data Analysis This repository is therefore laid out in those three steps to keep things simple and easy to follow. How to Use We have used python to build this however we have designed it so that you can start with zero knowledge of python and still have it work for you. In order to reduce complexity the repository has been stripped back to bare bones essentials starting with the installation of python itself within a trust / Uni environment through to running each component. We will keep working to improve it so if something is not right let us know and we will fix it. The intent is to provide a supportive structure for newcomers while also providing enough flexibility for experienced hands. Each site can embellish the base template as they wish - as long as the core data model and validation, analytics steps are used the output should be at least somewhat standardised. Repository Layout The code and documentation in this repository is laid out in three sections corresponding to the three steps laid out as above: \u251c\u2500\u2500 mkdocs.yml <- The configuration file for these docs (only necessary for docs development) \u251c\u2500\u2500 pipefile and lock <- alternative environment setup (only necessary for docs development) \u251c\u2500\u2500 licence <- Project Licence - MIT (Permissive) \u251c\u2500\u2500 .pre-commit-config.yaml <- Pre-commit hooks to prevent metadata retention inside notebooks during commits \u251c\u2500\u2500 environment.yml <- Environment setup file \u251c\u2500\u2500 init.sh and bat <- Setup scripts for windows and linux shells / command line \u251c\u2500\u2500 setup.py <- Sets up the python packages \u251c\u2500\u2500 README.md <- Taken from https://github.com/LTHTR-DST/hdruk_avoidable_admissions/blob/dev/README.md and simplified. Thanks to vvcb and the LTHRT team for all their work on this! \u2502 \u251c\u2500\u2500 docs/ \u2502 \u251c\u2500\u2500 index.md <- The index page \u2502 \u251c\u2500\u2500 documentation <- A brief explanation of the project - consult the main protocol for more details \u2502 \u251c\u2500\u2500 data_models <- The data model specs for the project \u2502 \u251c\u2500\u2500 how-to-guides <- How to Guides including starting from scratch \u2502 \u251c\u2500\u2500 code.md <- Codeshares and docstrings \u2502 \u251c\u2500\u2500 data_extraction/ \u2502 \u251c\u2500\u2500 synthetic_data <- Dummy data for testing (please note the dataset provided is incomplete and provided for demonstation of only a part of the process to get started) \u2502 \u251c\u2500\u2500 extraction.ipynb <- Simple example of extraction process and cleaning with python \u2502 \u251c\u2500\u2500 data_harmonization/ \u2502 \u251c\u2500\u2500 synthetic_data <- Dummy data for testing - will be generated by data_extraction phase (please note the dataset provided is incomplete and provided for demotion of only a part of the process to get you started) \u2502 \u251c\u2500\u2500 harmonization.ipynb <- Simple example of data harmonization with python \u2502 \u251c\u2500\u2500 data_analysis/ \u2502 \u251c\u2500\u2500 synthetic_data <- Dummy data for testing - will be generated by data_harmonization phase (please note the dataset provided is incomplete and provided for onstation of only a part of the process to get you started) \u2502 \u251c\u2500\u2500 harmonization.ipynb <- Simple example of data harmonization with python \u2502 \u251c\u2500\u2500 outputs/ <- Output folder for final aggregated results \u251c\u2500\u2500 modules/ <- Modules mostly for data harmonization Please get in contact if you are struggling with anything as you are likely not on your own and will help others by raising any issues.","title":"Index"},{"location":"#welcome-to-the-hdruk-avoidable-admissions-collaboration-docs","text":"This is a the web-guide to help facilitate federated data engineering across each site. CI Site: Sheffield","title":"Welcome to the HDRUK Avoidable Admissions Collaboration Docs"},{"location":"#site-main-sections","text":"index - This navigation page documentation - Partial documentation for the project. Please see the main Sheffield protocol for further details. The aim of this documentation is to encourage co-development data_models - Contains the core data model for the project guides - How to guides taking beginners through the process of setting up and running the pipeline. code - Explains the code modules for the project for those who want more details.","title":"Site Main Sections"},{"location":"#common-analytic-approach","text":"To facilitate successful working across all involved sites a common approach needs to be taken. This has been well described as below in the following diagram: As you can see in the diagram there are 3 major steps to the process which are: Data Extraction Data Harmonization Data Analysis This repository is therefore laid out in those three steps to keep things simple and easy to follow.","title":"Common Analytic Approach"},{"location":"#how-to-use","text":"We have used python to build this however we have designed it so that you can start with zero knowledge of python and still have it work for you. In order to reduce complexity the repository has been stripped back to bare bones essentials starting with the installation of python itself within a trust / Uni environment through to running each component. We will keep working to improve it so if something is not right let us know and we will fix it. The intent is to provide a supportive structure for newcomers while also providing enough flexibility for experienced hands. Each site can embellish the base template as they wish - as long as the core data model and validation, analytics steps are used the output should be at least somewhat standardised.","title":"How to Use"},{"location":"#repository-layout","text":"The code and documentation in this repository is laid out in three sections corresponding to the three steps laid out as above: \u251c\u2500\u2500 mkdocs.yml <- The configuration file for these docs (only necessary for docs development) \u251c\u2500\u2500 pipefile and lock <- alternative environment setup (only necessary for docs development) \u251c\u2500\u2500 licence <- Project Licence - MIT (Permissive) \u251c\u2500\u2500 .pre-commit-config.yaml <- Pre-commit hooks to prevent metadata retention inside notebooks during commits \u251c\u2500\u2500 environment.yml <- Environment setup file \u251c\u2500\u2500 init.sh and bat <- Setup scripts for windows and linux shells / command line \u251c\u2500\u2500 setup.py <- Sets up the python packages \u251c\u2500\u2500 README.md <- Taken from https://github.com/LTHTR-DST/hdruk_avoidable_admissions/blob/dev/README.md and simplified. Thanks to vvcb and the LTHRT team for all their work on this! \u2502 \u251c\u2500\u2500 docs/ \u2502 \u251c\u2500\u2500 index.md <- The index page \u2502 \u251c\u2500\u2500 documentation <- A brief explanation of the project - consult the main protocol for more details \u2502 \u251c\u2500\u2500 data_models <- The data model specs for the project \u2502 \u251c\u2500\u2500 how-to-guides <- How to Guides including starting from scratch \u2502 \u251c\u2500\u2500 code.md <- Codeshares and docstrings \u2502 \u251c\u2500\u2500 data_extraction/ \u2502 \u251c\u2500\u2500 synthetic_data <- Dummy data for testing (please note the dataset provided is incomplete and provided for demonstation of only a part of the process to get started) \u2502 \u251c\u2500\u2500 extraction.ipynb <- Simple example of extraction process and cleaning with python \u2502 \u251c\u2500\u2500 data_harmonization/ \u2502 \u251c\u2500\u2500 synthetic_data <- Dummy data for testing - will be generated by data_extraction phase (please note the dataset provided is incomplete and provided for demotion of only a part of the process to get you started) \u2502 \u251c\u2500\u2500 harmonization.ipynb <- Simple example of data harmonization with python \u2502 \u251c\u2500\u2500 data_analysis/ \u2502 \u251c\u2500\u2500 synthetic_data <- Dummy data for testing - will be generated by data_harmonization phase (please note the dataset provided is incomplete and provided for onstation of only a part of the process to get you started) \u2502 \u251c\u2500\u2500 harmonization.ipynb <- Simple example of data harmonization with python \u2502 \u251c\u2500\u2500 outputs/ <- Output folder for final aggregated results \u251c\u2500\u2500 modules/ <- Modules mostly for data harmonization Please get in contact if you are struggling with anything as you are likely not on your own and will help others by raising any issues.","title":"Repository Layout"},{"location":"code/code/","text":"Code We will embellish this part when everyone is up and running. For now the priority is to get the how-to guides operational and working for sites.","title":"Code"},{"location":"code/code/#code","text":"We will embellish this part when everyone is up and running. For now the priority is to get the how-to guides operational and working for sites.","title":"Code"},{"location":"data_models/admitted_patient_care_data_model/","text":"Admitted Patient Care Data Model Overview Patient records for all acute emergency admissions for adults (18 years + on day of admission) that had an admission date within the specified study period (see above). Please check the coding of the variables against those linked to in the \u2018Coding/Classification system\u2019 column, this is to ensure data (and therefore analysis) standardisation across sites. Data Model Variable name Description Reasoning / Filtering (see Coding / Classification system) Format / Coding / Classification system patient_id Pseudo individual patient identifier To be able to identify different/the same patient across the dataset, and to identify re-admissions. Derived from NHS Number. No filtering A unique pseudonymous identifier for each individual patient across the dataset gender Defines the sex of the patient To report on patient demographics. No filtering NHS Data Model PERSON GENDER CODE ethnos The ethnicity of the patient, as specified by the patient. Groups as defined in the 2001 census. To report on patient demographics. No filtering NHS Data Model ETHNIC CATEGORY procodet NHS Digital ODS code defining the organisation providing treatment. To be able to identify the trust of the admission NHS Data Model ORGANISATION CODE (CODE OF PROVIDER) sitetret NHS Digital ODS code defining the site on which the patient was treated within an organisation. Contains the first 3 digits of the provider code of treatment (procodet) with the last two digits being the site identifier. To be able to identify the site of the admission NHS Data Model SITE CODE (OF TREATMENT) townsend_score_decile Deprivation measure that covers both England and Scotland. To be derived from patient postcode To report on patient demographics. No filtering. (https://statistics.ukdataservice.ac.uk/dataset/2011-uk-townsend-deprivation-scores) Derived from NHS Data Model POSTCODE OF USUAL ADDRESS admimeth Identifies how the patient was admitted to hospital Will act as a later co-variate to discriminate between elective and emergency admissions. admimeth in (21, 22, 23, 24, 25, 2A, 2B, 2C, 2D, 28) admisorc Identifies where the patient was immediately prior to admission Used to identify possible care home admissions. No filtering NHS Data Model SOURCE OF ADMISSION CODE (HOSPITAL PROVIDER SPELL) admidate The date the patient was admitted to hospital at the start of a hospital spell. Start date of hospital spell, to limit the time period of interest. admidate on or after 2021-11-01 and also on or before 2022-10-31 admitime The time the patient was admitted to hospital at the start of a hospital spell. hh:mm:ss format Start time of hospital spell. No filtering NHS Data Model START TIME (HOSPITAL PROVIDER SPELL) disdest Identifies where the patient was due to go on leaving hospital Can be used to identify discharge to care homes.No filtering NHS Data Model DISCHARGE DESTINATION CODE (HOSPITAL PROVIDER SPELL dismeth Indicates the circumstances under which a patient left hospital Used to identify deaths. No filtering NHS Data Model DISCHARGE METHOD CODE (HOSPITAL PROVIDER SPELL) length_of_stay The length of stay of the patient admission. Calculated as the time between a patient's spell start date and spell end date. No filtering Derived from NHS Data Model START DATE (HOSPITAL PROVIDER SPELL) and NHS Data Model DISCHARGE DATE (HOSPITAL PROVIDER SPELL) epiorder The order of the episode within the current hospital provider spell. 1 indicates the first episode in the hospital provider spell, 2 the second, etc. We wish diagnosis and procedure data from only the first episode of a spell (epiorder = 1). NHS Data Model EPISODE NUMBER admiage Age on admission To report on patient demographics and to limit to desired cohort.Filter: Admiage equals or is greater than 18 years old NHS Data Model AGE ON ADMISSION diag_01 The primary diagnosis code recorded for the episode. The classification system in use is ICD-10. Used to identify ambulatory care sensitive conditions. See epiorder. No filtering NHS Data Model PRIMARY DIAGNOSIS (ICD) . Code required to be in contemporary ICD-10 coding standard. diag_NN The secondary diagnosis codes recorded for the episode. The classification system in use is ICD-10. Used to identify ambulatory care sensitive conditions. See epiorder. May include up to 19 secondary diagnosis fields, from 02-20. NHS Data Model SECONDARY DIAGNOSIS (ICD) . Code required to be in contemporary ICD-10 coding standard. opertn_01 The main operative procedure code recorded for the episode. The classification system in use is OPCS-4. See epiorder. No filtering NHS Data Model PRIMARY PROCEDURE (OPCS) . Codes required to be in contemporary OPCS-4 coding standard opdate_01 The date the primary operative procedure took place. See epiorder. No filtering NHS Data Model PROCEDURE DATE opertn_NN Secondary procedure code See epiorder. No filtering. May include up to 23 secondary procedure fields, from 02-24. NHS Data Model PROCEDURE (OPCS) . Codes required to be in contemporary OPCS-4 coding standard opdate_NN Secondary procedure date See epiorder. No filtering NHS Data Model PROCEDURE DATE disreadydays Discharge Ready Days - The difference between the discharge ready date and discharge date (in days) No filtering NHS Data Model DISCHARGE READY DATE to the NHS Data Model DISCHARGE DATE Note: We are aware that the CDS allows for unlimited secondary diagnoses and procedures to be recorded. The first recorded 19 such secondary diagnoses and first 23 such secondary procedures are sufficient for our purposes.","title":"Admitted Patient Care"},{"location":"data_models/admitted_patient_care_data_model/#admitted-patient-care-data-model","text":"","title":"Admitted Patient Care Data Model"},{"location":"data_models/admitted_patient_care_data_model/#overview","text":"Patient records for all acute emergency admissions for adults (18 years + on day of admission) that had an admission date within the specified study period (see above). Please check the coding of the variables against those linked to in the \u2018Coding/Classification system\u2019 column, this is to ensure data (and therefore analysis) standardisation across sites.","title":"Overview"},{"location":"data_models/admitted_patient_care_data_model/#data-model","text":"Variable name Description Reasoning / Filtering (see Coding / Classification system) Format / Coding / Classification system patient_id Pseudo individual patient identifier To be able to identify different/the same patient across the dataset, and to identify re-admissions. Derived from NHS Number. No filtering A unique pseudonymous identifier for each individual patient across the dataset gender Defines the sex of the patient To report on patient demographics. No filtering NHS Data Model PERSON GENDER CODE ethnos The ethnicity of the patient, as specified by the patient. Groups as defined in the 2001 census. To report on patient demographics. No filtering NHS Data Model ETHNIC CATEGORY procodet NHS Digital ODS code defining the organisation providing treatment. To be able to identify the trust of the admission NHS Data Model ORGANISATION CODE (CODE OF PROVIDER) sitetret NHS Digital ODS code defining the site on which the patient was treated within an organisation. Contains the first 3 digits of the provider code of treatment (procodet) with the last two digits being the site identifier. To be able to identify the site of the admission NHS Data Model SITE CODE (OF TREATMENT) townsend_score_decile Deprivation measure that covers both England and Scotland. To be derived from patient postcode To report on patient demographics. No filtering. (https://statistics.ukdataservice.ac.uk/dataset/2011-uk-townsend-deprivation-scores) Derived from NHS Data Model POSTCODE OF USUAL ADDRESS admimeth Identifies how the patient was admitted to hospital Will act as a later co-variate to discriminate between elective and emergency admissions. admimeth in (21, 22, 23, 24, 25, 2A, 2B, 2C, 2D, 28) admisorc Identifies where the patient was immediately prior to admission Used to identify possible care home admissions. No filtering NHS Data Model SOURCE OF ADMISSION CODE (HOSPITAL PROVIDER SPELL) admidate The date the patient was admitted to hospital at the start of a hospital spell. Start date of hospital spell, to limit the time period of interest. admidate on or after 2021-11-01 and also on or before 2022-10-31 admitime The time the patient was admitted to hospital at the start of a hospital spell. hh:mm:ss format Start time of hospital spell. No filtering NHS Data Model START TIME (HOSPITAL PROVIDER SPELL) disdest Identifies where the patient was due to go on leaving hospital Can be used to identify discharge to care homes.No filtering NHS Data Model DISCHARGE DESTINATION CODE (HOSPITAL PROVIDER SPELL dismeth Indicates the circumstances under which a patient left hospital Used to identify deaths. No filtering NHS Data Model DISCHARGE METHOD CODE (HOSPITAL PROVIDER SPELL) length_of_stay The length of stay of the patient admission. Calculated as the time between a patient's spell start date and spell end date. No filtering Derived from NHS Data Model START DATE (HOSPITAL PROVIDER SPELL) and NHS Data Model DISCHARGE DATE (HOSPITAL PROVIDER SPELL) epiorder The order of the episode within the current hospital provider spell. 1 indicates the first episode in the hospital provider spell, 2 the second, etc. We wish diagnosis and procedure data from only the first episode of a spell (epiorder = 1). NHS Data Model EPISODE NUMBER admiage Age on admission To report on patient demographics and to limit to desired cohort.Filter: Admiage equals or is greater than 18 years old NHS Data Model AGE ON ADMISSION diag_01 The primary diagnosis code recorded for the episode. The classification system in use is ICD-10. Used to identify ambulatory care sensitive conditions. See epiorder. No filtering NHS Data Model PRIMARY DIAGNOSIS (ICD) . Code required to be in contemporary ICD-10 coding standard. diag_NN The secondary diagnosis codes recorded for the episode. The classification system in use is ICD-10. Used to identify ambulatory care sensitive conditions. See epiorder. May include up to 19 secondary diagnosis fields, from 02-20. NHS Data Model SECONDARY DIAGNOSIS (ICD) . Code required to be in contemporary ICD-10 coding standard. opertn_01 The main operative procedure code recorded for the episode. The classification system in use is OPCS-4. See epiorder. No filtering NHS Data Model PRIMARY PROCEDURE (OPCS) . Codes required to be in contemporary OPCS-4 coding standard opdate_01 The date the primary operative procedure took place. See epiorder. No filtering NHS Data Model PROCEDURE DATE opertn_NN Secondary procedure code See epiorder. No filtering. May include up to 23 secondary procedure fields, from 02-24. NHS Data Model PROCEDURE (OPCS) . Codes required to be in contemporary OPCS-4 coding standard opdate_NN Secondary procedure date See epiorder. No filtering NHS Data Model PROCEDURE DATE disreadydays Discharge Ready Days - The difference between the discharge ready date and discharge date (in days) No filtering NHS Data Model DISCHARGE READY DATE to the NHS Data Model DISCHARGE DATE Note: We are aware that the CDS allows for unlimited secondary diagnoses and procedures to be recorded. The first recorded 19 such secondary diagnoses and first 23 such secondary procedures are sufficient for our purposes.","title":"Data Model"},{"location":"data_models/emergency_care_data_model/","text":"Emergency Care Data Model Overview Patient records for all emergency care attendances for adults (18 years + on day of admission) that had an admission date within the specified study period (see above). Please check the coding of the variables against those linked to in the \u2018Coding/Classification system\u2019 column, this is to ensure data (and therefore analysis) standardisation across sites. Data Model Variable name Description Reasoning / Filtering (see Coding / Classification system) Format / Coding / Classification system patient_id Pseudo individual patient identifier To be able to identify different/the same patient across the dataset, and to identify re-admissions. Likely derived from NHS Number / CHI. No filtering A unique identifier for each individual patient across the dataset townsend_score_decile Deprivation measure that covers both England and Scotland. To be derived from patient postcode. To report on patient demographics No filtering (https://statistics.ukdataservice.ac.uk/dataset/2011-uk-townsend-deprivation-scores) Derived from NHS Data Model POSTCODE OF USUAL ADDRESS gender Defines the sex of the patient To report on patient demographics. No filtering NHS Data Model PERSON STATED GENDER CODE ethnos The ethnicity of the patient, as specified by the patient. Groups as defined in the 2001 census. To report on patient demographics. No filtering NHS Data Model ETHNIC CATEGORY accommodationstatus Accommodation Status. SNOMED code Can be used to identify patient who live in residential or nursing homes. No filtering NHS Data Model ACCOMMODATION STATUS (SNOMED CT) procodet NHS Digital ODS code defining the organisation providing treatment. To be able to identify the trust of the admission NHS Data Model ORGANISATION IDENTIFIER (CODE OF PROVIDER) edsitecode Site code for each Type 1 Emergency Department at the Trust. To be derived from Organisation Site Identifier of Treatment and to include the first 3 digits of the provider code of treatment (procodet) To be able to identify the site of the admission Derived from NHS Data Model ORGANISATION SITE IDENTIFIER (OF TREATMENT) eddepttype The type of Emergency Department Used to select attendances at type 1 EDs. (eddepttype = 01) NHS Data Model EMERGENCY CARE DEPARTMENT TYPE edarrivalmode Transport mode by which the patient arrived at the Emergency Department. SNOMED code. Used to identify arrival by ambulance, etc. No filtering NHS Data Model EMERGENCY CARE ARRIVAL MODE (SNOMED CT) edattendcat The category of emergency care attendance Used to identify unplanned first emergency care attendance for a new clinical condition (or deterioration of a chronic condition). (edattendcat = 1) NHS Data Model EMERGENCY CARE ATTENDANCE CATEGORY edattendsource The source of an Emergency Care Attendance Used to identify the source of an attendance (e.g. via a GP). No filtering NHS Data Model EMERGENCY CARE ATTENDANCE SOURCE (SNOMED CT) edarrivaldatetime Emergency Care Arrival DateTime. Format YYYY/MM/DD hh:mm:ss TMZ Arrival datetime at the emergency department. EmergencyCareArrivalDate >=2021-11-01T00:00:00 and <2022-10-31T23:59:59. Timezone will be required to derive time in ED correctly. Derived from NHS Data Model EMERGENCY CARE ARRIVAL DATE and NHS Data Model EMERGENCY CARE ARRIVAL TIME activage Age at time of activity To report on patient demographics and to limit to desired cohort. admiage equals or is greater than 18 years old NHS Data Model AGE AT CDS ACTIVITY DATE edacuity Acuity of patient\u2019s condition at time of initial assessment. SNOMED code. To report on patient demographics. No filtering NHS Data Model EMERGENCY CARE ACUITY (SNOMED CT) edchiefcomplaint Chief complaint as assessed by the care professional first assessing the patient. SNOMED code. No filtering NHS Data Model EMERGENCY CARE CHIEF COMPLAINT (SNOMED CT) edcomorb_NN Comorbidities identified for the patient. SNOMED code. Used to identify comorbid conditions. May include up to 10 fields, from 01-10 NHS Data Model COMORBIDITY (SNOMED CT) eddiag_NN Diagnosis codes recorded for the attendance Used to identify Ambulatory Care Sensitive Conditions. May include up to 12 fields, from 01-12 NHS Data Model EMERGENCY CARE DIAGNOSIS (SNOMED CT) edentryseq_NN Sequence number associated with the diagnosis, giving the position it was recorded by the clinician Used to tie diagnosis to the position they were recorded. May include up to 2 fields, from 01-12 NHS Data Model CODED CLINICAL ENTRY SEQUENCE NUMBER eddiagqual_NN Level of certainty of a patient diagnosis. SNOMED code. Used to identify the level of certainty of a diagnosis. May include up to 12 fields, from 01-12 NHS Data Model EMERGENCY CARE DIAGNOSIS QUALIFIER (SNOMED CT) edinvest_NN Clinical investigations performed while a patient is under the care of an Emergency Department. SNOMED code. Identify investigations. May include up to 12 fields, from 01-12 NHS Data Model EMERGENCY CARE CLINICAL INVESTIGATION (SNOMED CT) edtreat_NN Treatments performed while the person is under the care of the emergency department. SNOMED code. Identify treatments/procedures. May include up to 12 fields, from 01-12. NHS Data Model EMERGENCY CARE PROCEDURE (SNOMED CT) timeined The time a patient spent in ED (in minutes) Used to report on time in ED. See edarrivaldatetime for filtering. Also, timezone will need to be considered to correctly derive field around daylight saving transition (BST/GMT) Derived from NHS Data Model EMERGENCY CARE DEPARTURE DATE and NHS Data Model EMERGENCY CARE DEPARTURE TIME and edarrivaldatetime edattenddispatch Intended destination of patient following discharge from the emergency department. SNOMED code Used to identify patients who are discharged, admitted, died, etc. No filtering NHS Data Model EMERGENCY CARE DISCHARGE DESTINATION (SNOMED CT) edrefservice Inpatient service to which the patient was referred for admission or opinion by treating clinician. SNOMED code. To describe where admitted patients are referred. No filtering NHS Data Model REFERRED TO SERVICE (SNOMED CT) Note: We are aware that the CDS allows for unlimited diagnoses, comorbidities, procedures, and treatments to be recorded. The first recorded 12 such diagnoses, procedures, and treatments, and first 10 such comorbidities are sufficient for our purposes.","title":"Emergency Care"},{"location":"data_models/emergency_care_data_model/#emergency-care-data-model","text":"","title":"Emergency Care Data Model"},{"location":"data_models/emergency_care_data_model/#overview","text":"Patient records for all emergency care attendances for adults (18 years + on day of admission) that had an admission date within the specified study period (see above). Please check the coding of the variables against those linked to in the \u2018Coding/Classification system\u2019 column, this is to ensure data (and therefore analysis) standardisation across sites.","title":"Overview"},{"location":"data_models/emergency_care_data_model/#data-model","text":"Variable name Description Reasoning / Filtering (see Coding / Classification system) Format / Coding / Classification system patient_id Pseudo individual patient identifier To be able to identify different/the same patient across the dataset, and to identify re-admissions. Likely derived from NHS Number / CHI. No filtering A unique identifier for each individual patient across the dataset townsend_score_decile Deprivation measure that covers both England and Scotland. To be derived from patient postcode. To report on patient demographics No filtering (https://statistics.ukdataservice.ac.uk/dataset/2011-uk-townsend-deprivation-scores) Derived from NHS Data Model POSTCODE OF USUAL ADDRESS gender Defines the sex of the patient To report on patient demographics. No filtering NHS Data Model PERSON STATED GENDER CODE ethnos The ethnicity of the patient, as specified by the patient. Groups as defined in the 2001 census. To report on patient demographics. No filtering NHS Data Model ETHNIC CATEGORY accommodationstatus Accommodation Status. SNOMED code Can be used to identify patient who live in residential or nursing homes. No filtering NHS Data Model ACCOMMODATION STATUS (SNOMED CT) procodet NHS Digital ODS code defining the organisation providing treatment. To be able to identify the trust of the admission NHS Data Model ORGANISATION IDENTIFIER (CODE OF PROVIDER) edsitecode Site code for each Type 1 Emergency Department at the Trust. To be derived from Organisation Site Identifier of Treatment and to include the first 3 digits of the provider code of treatment (procodet) To be able to identify the site of the admission Derived from NHS Data Model ORGANISATION SITE IDENTIFIER (OF TREATMENT) eddepttype The type of Emergency Department Used to select attendances at type 1 EDs. (eddepttype = 01) NHS Data Model EMERGENCY CARE DEPARTMENT TYPE edarrivalmode Transport mode by which the patient arrived at the Emergency Department. SNOMED code. Used to identify arrival by ambulance, etc. No filtering NHS Data Model EMERGENCY CARE ARRIVAL MODE (SNOMED CT) edattendcat The category of emergency care attendance Used to identify unplanned first emergency care attendance for a new clinical condition (or deterioration of a chronic condition). (edattendcat = 1) NHS Data Model EMERGENCY CARE ATTENDANCE CATEGORY edattendsource The source of an Emergency Care Attendance Used to identify the source of an attendance (e.g. via a GP). No filtering NHS Data Model EMERGENCY CARE ATTENDANCE SOURCE (SNOMED CT) edarrivaldatetime Emergency Care Arrival DateTime. Format YYYY/MM/DD hh:mm:ss TMZ Arrival datetime at the emergency department. EmergencyCareArrivalDate >=2021-11-01T00:00:00 and <2022-10-31T23:59:59. Timezone will be required to derive time in ED correctly. Derived from NHS Data Model EMERGENCY CARE ARRIVAL DATE and NHS Data Model EMERGENCY CARE ARRIVAL TIME activage Age at time of activity To report on patient demographics and to limit to desired cohort. admiage equals or is greater than 18 years old NHS Data Model AGE AT CDS ACTIVITY DATE edacuity Acuity of patient\u2019s condition at time of initial assessment. SNOMED code. To report on patient demographics. No filtering NHS Data Model EMERGENCY CARE ACUITY (SNOMED CT) edchiefcomplaint Chief complaint as assessed by the care professional first assessing the patient. SNOMED code. No filtering NHS Data Model EMERGENCY CARE CHIEF COMPLAINT (SNOMED CT) edcomorb_NN Comorbidities identified for the patient. SNOMED code. Used to identify comorbid conditions. May include up to 10 fields, from 01-10 NHS Data Model COMORBIDITY (SNOMED CT) eddiag_NN Diagnosis codes recorded for the attendance Used to identify Ambulatory Care Sensitive Conditions. May include up to 12 fields, from 01-12 NHS Data Model EMERGENCY CARE DIAGNOSIS (SNOMED CT) edentryseq_NN Sequence number associated with the diagnosis, giving the position it was recorded by the clinician Used to tie diagnosis to the position they were recorded. May include up to 2 fields, from 01-12 NHS Data Model CODED CLINICAL ENTRY SEQUENCE NUMBER eddiagqual_NN Level of certainty of a patient diagnosis. SNOMED code. Used to identify the level of certainty of a diagnosis. May include up to 12 fields, from 01-12 NHS Data Model EMERGENCY CARE DIAGNOSIS QUALIFIER (SNOMED CT) edinvest_NN Clinical investigations performed while a patient is under the care of an Emergency Department. SNOMED code. Identify investigations. May include up to 12 fields, from 01-12 NHS Data Model EMERGENCY CARE CLINICAL INVESTIGATION (SNOMED CT) edtreat_NN Treatments performed while the person is under the care of the emergency department. SNOMED code. Identify treatments/procedures. May include up to 12 fields, from 01-12. NHS Data Model EMERGENCY CARE PROCEDURE (SNOMED CT) timeined The time a patient spent in ED (in minutes) Used to report on time in ED. See edarrivaldatetime for filtering. Also, timezone will need to be considered to correctly derive field around daylight saving transition (BST/GMT) Derived from NHS Data Model EMERGENCY CARE DEPARTURE DATE and NHS Data Model EMERGENCY CARE DEPARTURE TIME and edarrivaldatetime edattenddispatch Intended destination of patient following discharge from the emergency department. SNOMED code Used to identify patients who are discharged, admitted, died, etc. No filtering NHS Data Model EMERGENCY CARE DISCHARGE DESTINATION (SNOMED CT) edrefservice Inpatient service to which the patient was referred for admission or opinion by treating clinician. SNOMED code. To describe where admitted patients are referred. No filtering NHS Data Model REFERRED TO SERVICE (SNOMED CT) Note: We are aware that the CDS allows for unlimited diagnoses, comorbidities, procedures, and treatments to be recorded. The first recorded 12 such diagnoses, procedures, and treatments, and first 10 such comorbidities are sufficient for our purposes.","title":"Data Model"},{"location":"documentation/avoidable_admissions_sap/","text":"Avoidable Admissions Statistical Analysis Approach Please consult the core protocol from Sheffield for a detailed explanation of the purpose of the project and use that as the primary point of reference not this website which only mirrors their protocol. Aims To understand variation across the country in all acute hospital admissions To explore methods for identifying an avoidable acute admission focussing on ambulatory care sensitive conditions Ambulatory care sensitive conditions (ACSCs) are conditions where effective community care and case management can help prevent the need for hospital admission. Objectives Take a multi-regional approach to analysing routine data to describe patterns of acute admission and regional variation in admissions over a defined period of time Analyse variation in acute admission by factors including deprivation, patient demographics, time of day, day of week, waiting times Use hospital admission data to describe outcomes following acute admission including length of stay, death in hospital. Identifying groups of patients at high risk of an avoidable admission using ACSC codes from the Emergency Department and also acute admissions data For ambulatory care conditions (ACSC), we are wanting to explore variations in ED attendances and admitted patients. We are interested in exploring this by patient characteristics such as deprivation and age, as well as looking to see how the attendances differ, i.e. time of day. In addition, we want to explore variations in the outcomes, for example, length of stay and death. 1. ECDS (ED) dataset: 1.1 Analysis Populations This section describes the analysis populations for the analysis of the ECDS data. These populations will be referred to in the analysis descriptions that follow. 1.1.1 All Attendances This analysis population includes all adult unplanned first emergency care attendances for a new clinical condition (or deterioration of a chronic condition) at Type 1 Emergency Departments (Emergency Departments that are a consultant led 24 hour service with full resuscitation facilities and designated accommodation for the reception of emergency care patients) Filter: (edattendcat = 1) & (eddepttype = 01) These filters should have been applied to the original data extract. 1.1.2 Attendances for ACSCs This analysis population includes all unplanned first emergency care attendances for a new clinical condition (or deterioration of a chronic condition) at a Type 1 Emergency Department where the primary diagnosis is an ACSC. Filter: (edattendcat = 1) & (eddepttype = 01) & (eddiag_01 = ACSC_Code_ED) Please see HDRUK Data Processing V1 for ACSC_Code_ED definition. (These definitions are replicated in the codebase inside this repository) 1.1.3 Attendances for Non-ACSCs This analysis population includes all unplanned first emergency care attendances for a new clinical condition (or deterioration of a chronic condition) at a Type 1 Emergency Department where the primary diagnosis is not an ACSC. Filter: (edattendcat = 1) & (eddepttype = 01) & (eddiag_01 != ACSC_Code_ED) Please see HDRUK Data Processing V1 for ACSC_Code_ED definition. 1.2 Demographics Summary statistics of the patient demographics, attendance characteristics and attendance outcomes will be calculated. For numerical variables, the minimum (min), maximum (max), mean, standard deviation (SD), median, lower quartile (Q1) and upper quartile (Q3) will be presented with the number of observations used in the calculations. For categorical variables, the number and percentage of patients in each of the categories and the total number of observations will be calculated. Summary statistics for the demographic variables will be presented at the hospital site level (identified using edsitecode). This analysis will allow the comparison of demographics between different Emergency Departments and investigate any variation in discharge destination (e.g. variation in admissions). The following summaries will be presented for analysis populations: All Attendances, Attendances for ACSCs and Attendances for Non-ACSCs. 1.2.1 Patient Demographics Age (categorical (to be decided)) - Frequency and proportions Age (continuous) - (N, min, max, mean, SD, median, Q1, Q3) Gender - Frequency and proportions Ethnicity (Categories to be decided) - Frequency and proportions Townsend score decile - Frequencies and proportions Care home flag - Frequencies and proportions Comorbidities - Frequencies and proportions 1.2.2 Attendance Characteristics Ambulatory Care Sensitive Condition - Frequencies and proportions (Attendances for ACSCs analysis population only) Arrival mode - Frequencies and proportions Source of attendance (Categories to be decided) - Frequencies and proportions Day of week - Frequencies and proportions Time of day (Categories to be decided) - Frequencies and proportions Acuity - Frequencies and proportions Presenting complaint - Frequencies and proportions Investigations - Frequencies and proportions Treatments - Frequencies and proportions Certainty - Frequencies and proportions Time in department - (N, min, max, mean, SD, median, Q1, Q3) 1.2.3 Attendance Outcomes Discharge destination - Frequencies and proportions Service referred to - Frequencies and proportions Discharge method - Frequencies and proportions 1.3 ACSC Analysis This analysis will investigate how all ACSC conditions are handled coming through ED in terms of the discharge destination (e.g. admitted, not admitted, died). It will also potentially identify patient and attendance characteristics that are predictors of avoidable admission. Summary statistics of the patient demographics, attendance characteristics and attendance outcomes will be calculated. For numerical variables, the minimum (min), maximum (max), mean, standard deviation (SD), median, lower quartile (Q1) and upper quartile (Q3) will be presented with the number of observations used in the calculations. For categorical variables, the number and percentage of patients in each of the categories and the total number of observations will be calculated. Summary statistics for the demographic variables will be calculated by discharge destination (edattenddispatch - categorisation to be decided) and presented at the hospital site level (identified using edsitecode). The following summaries will be presented for analysis populations: Attendances for ACSCs. 1.3.1 Patient Demographics Age (categorical (to be decided)) - Frequencies and proportions Age continuous (N, min, max, mean, SD, median, Q1, Q3) Gender - Frequencies and proportions Ethnicity (Categories to be decided) - Frequencies and proportions Townsend - Frequencies and proportions Carehome flag - Frequencies and proportions Comorbidities - Frequencies and proportions 1.3.2 Attendance Characteristics Ambulatory Care Sensitive Condition - Frequencies and proportions Arrival mode - Frequencies and proportions Source - Frequencies and proportions Day of week - Frequencies and proportions Time of day - Frequencies and proportions Acuity - Frequencies and proportions Presenting complaint - Frequencies and proportions Investigations - Frequencies and proportions Treatments - Frequencies and proportions Certainty - Frequencies and proportions Time in department - (N, min, max, mean, SD, median, Q1, Q3) 2. Admitted Patient Care (APC) Dataset 2.1 Analysis Populations This section describes the analysis populations or the analysis of the APC data. These populations will be referred to in the analysis descriptions that follow. 2.1.1 All Acute Admissions This analysis population includes all acute admissions. Filter: (admimeth in 21, 22, 23, 24, 25, 2A, 2B, 2C, 2D, 28) & (epiorder = 1) These filters should have been applied to the original data extract. 2.1.2 All Acute Admissions for ACSCs This analysis population includes all acute admissions where the primary diagnosis from the first episode is an ACSC. Filter: (admimeth in 21, 22, 23, 24, 25, 2A, 2B, 2C, 2D, 28) & (epiorder = 1) & (diag_01 = ACSC_Code_APC) Please see HDRUK Data Processing V1 for ASCS_Code_APC definition. 2.1.3 All Acute Admissions for Non-ACSCs This analysis population includes all acute admissions where the primary diagnosis from the first episode is not an ACSC. Filter: (admimeth in 21, 22, 23, 24, 25, 2A, 2B, 2C, 2D, 28) & (epiorder = 1) & (diag_01 != ACSC_Code_APC) Please see HDRUK Data Processing V1 for ASCS_Code_APC definition. 2.2 Demographics Summary statistics of the patient demographics, admission characteristics and admission outcomes will be calculated. For numerical variables, the minimum (min), maximum (max), mean, standard deviation (SD), median, lower quartile (Q1) and upper quartile (Q3) will be presented with the number of observations used in the calculations. For categorical variables, the number and percentage of patients in each of the categories and the total number of observations will be calculated. Summary statistics for the demographic variables will be presented at the hospital site level (identified using sitret). This analysis will allow the comparison of demographics between different Hospitals. The following summaries will be presented for analysis populations: All Acute Admissions, All Acute Admissions for ACSCs and All Acute Admissions for Non-ACSCs. 2.2.1 Patient Demographics Age (categorical (to be decided)) - Frequency and proportions Age (continuous) - (N, min, max, mean, SD, median, Q1, Q3) Gender - Frequency and proportions Ethnicity (Categories to be decided) - Frequency and proportions Townsend score decile - Frequencies and proportions Comorbidities - Frequencies and proportions 2.2.2 Admission Characteristics Ambulatory Care Sensitive Condition - Frequencies and proportions (All Acute Admissions for ACSC analysis population only) Source of admission - Frequencies and proportions Day of the week - Frequencies and proportions 2.2.3 Admission Outcomes Length of stay - (N, min, max, mean, SD, median, Q1, Q3) Length of stay dichotomised (<2 days) Discharge destination - Frequencies and proportions Procedures - Frequencies and proportions","title":"Avoidable Admissions"},{"location":"documentation/avoidable_admissions_sap/#avoidable-admissions-statistical-analysis-approach","text":"Please consult the core protocol from Sheffield for a detailed explanation of the purpose of the project and use that as the primary point of reference not this website which only mirrors their protocol.","title":"Avoidable Admissions Statistical Analysis Approach"},{"location":"documentation/avoidable_admissions_sap/#aims","text":"To understand variation across the country in all acute hospital admissions To explore methods for identifying an avoidable acute admission focussing on ambulatory care sensitive conditions Ambulatory care sensitive conditions (ACSCs) are conditions where effective community care and case management can help prevent the need for hospital admission.","title":"Aims"},{"location":"documentation/avoidable_admissions_sap/#objectives","text":"Take a multi-regional approach to analysing routine data to describe patterns of acute admission and regional variation in admissions over a defined period of time Analyse variation in acute admission by factors including deprivation, patient demographics, time of day, day of week, waiting times Use hospital admission data to describe outcomes following acute admission including length of stay, death in hospital. Identifying groups of patients at high risk of an avoidable admission using ACSC codes from the Emergency Department and also acute admissions data For ambulatory care conditions (ACSC), we are wanting to explore variations in ED attendances and admitted patients. We are interested in exploring this by patient characteristics such as deprivation and age, as well as looking to see how the attendances differ, i.e. time of day. In addition, we want to explore variations in the outcomes, for example, length of stay and death.","title":"Objectives"},{"location":"documentation/avoidable_admissions_sap/#1-ecds-ed-dataset","text":"","title":"1. ECDS (ED) dataset:"},{"location":"documentation/avoidable_admissions_sap/#11-analysis-populations","text":"This section describes the analysis populations for the analysis of the ECDS data. These populations will be referred to in the analysis descriptions that follow.","title":"1.1 Analysis Populations"},{"location":"documentation/avoidable_admissions_sap/#111-all-attendances","text":"This analysis population includes all adult unplanned first emergency care attendances for a new clinical condition (or deterioration of a chronic condition) at Type 1 Emergency Departments (Emergency Departments that are a consultant led 24 hour service with full resuscitation facilities and designated accommodation for the reception of emergency care patients) Filter: (edattendcat = 1) & (eddepttype = 01) These filters should have been applied to the original data extract.","title":"1.1.1 All Attendances"},{"location":"documentation/avoidable_admissions_sap/#112-attendances-for-acscs","text":"This analysis population includes all unplanned first emergency care attendances for a new clinical condition (or deterioration of a chronic condition) at a Type 1 Emergency Department where the primary diagnosis is an ACSC. Filter: (edattendcat = 1) & (eddepttype = 01) & (eddiag_01 = ACSC_Code_ED) Please see HDRUK Data Processing V1 for ACSC_Code_ED definition. (These definitions are replicated in the codebase inside this repository)","title":"1.1.2 Attendances for ACSCs"},{"location":"documentation/avoidable_admissions_sap/#113-attendances-for-non-acscs","text":"This analysis population includes all unplanned first emergency care attendances for a new clinical condition (or deterioration of a chronic condition) at a Type 1 Emergency Department where the primary diagnosis is not an ACSC. Filter: (edattendcat = 1) & (eddepttype = 01) & (eddiag_01 != ACSC_Code_ED) Please see HDRUK Data Processing V1 for ACSC_Code_ED definition.","title":"1.1.3 Attendances for Non-ACSCs"},{"location":"documentation/avoidable_admissions_sap/#12-demographics","text":"Summary statistics of the patient demographics, attendance characteristics and attendance outcomes will be calculated. For numerical variables, the minimum (min), maximum (max), mean, standard deviation (SD), median, lower quartile (Q1) and upper quartile (Q3) will be presented with the number of observations used in the calculations. For categorical variables, the number and percentage of patients in each of the categories and the total number of observations will be calculated. Summary statistics for the demographic variables will be presented at the hospital site level (identified using edsitecode). This analysis will allow the comparison of demographics between different Emergency Departments and investigate any variation in discharge destination (e.g. variation in admissions). The following summaries will be presented for analysis populations: All Attendances, Attendances for ACSCs and Attendances for Non-ACSCs.","title":"1.2 Demographics"},{"location":"documentation/avoidable_admissions_sap/#121-patient-demographics","text":"Age (categorical (to be decided)) - Frequency and proportions Age (continuous) - (N, min, max, mean, SD, median, Q1, Q3) Gender - Frequency and proportions Ethnicity (Categories to be decided) - Frequency and proportions Townsend score decile - Frequencies and proportions Care home flag - Frequencies and proportions Comorbidities - Frequencies and proportions","title":"1.2.1 Patient Demographics"},{"location":"documentation/avoidable_admissions_sap/#122-attendance-characteristics","text":"Ambulatory Care Sensitive Condition - Frequencies and proportions (Attendances for ACSCs analysis population only) Arrival mode - Frequencies and proportions Source of attendance (Categories to be decided) - Frequencies and proportions Day of week - Frequencies and proportions Time of day (Categories to be decided) - Frequencies and proportions Acuity - Frequencies and proportions Presenting complaint - Frequencies and proportions Investigations - Frequencies and proportions Treatments - Frequencies and proportions Certainty - Frequencies and proportions Time in department - (N, min, max, mean, SD, median, Q1, Q3)","title":"1.2.2 Attendance Characteristics"},{"location":"documentation/avoidable_admissions_sap/#123-attendance-outcomes","text":"Discharge destination - Frequencies and proportions Service referred to - Frequencies and proportions Discharge method - Frequencies and proportions","title":"1.2.3 Attendance Outcomes"},{"location":"documentation/avoidable_admissions_sap/#13-acsc-analysis","text":"This analysis will investigate how all ACSC conditions are handled coming through ED in terms of the discharge destination (e.g. admitted, not admitted, died). It will also potentially identify patient and attendance characteristics that are predictors of avoidable admission. Summary statistics of the patient demographics, attendance characteristics and attendance outcomes will be calculated. For numerical variables, the minimum (min), maximum (max), mean, standard deviation (SD), median, lower quartile (Q1) and upper quartile (Q3) will be presented with the number of observations used in the calculations. For categorical variables, the number and percentage of patients in each of the categories and the total number of observations will be calculated. Summary statistics for the demographic variables will be calculated by discharge destination (edattenddispatch - categorisation to be decided) and presented at the hospital site level (identified using edsitecode). The following summaries will be presented for analysis populations: Attendances for ACSCs.","title":"1.3 ACSC Analysis"},{"location":"documentation/avoidable_admissions_sap/#131-patient-demographics","text":"Age (categorical (to be decided)) - Frequencies and proportions Age continuous (N, min, max, mean, SD, median, Q1, Q3) Gender - Frequencies and proportions Ethnicity (Categories to be decided) - Frequencies and proportions Townsend - Frequencies and proportions Carehome flag - Frequencies and proportions Comorbidities - Frequencies and proportions","title":"1.3.1 Patient Demographics"},{"location":"documentation/avoidable_admissions_sap/#132-attendance-characteristics","text":"Ambulatory Care Sensitive Condition - Frequencies and proportions Arrival mode - Frequencies and proportions Source - Frequencies and proportions Day of week - Frequencies and proportions Time of day - Frequencies and proportions Acuity - Frequencies and proportions Presenting complaint - Frequencies and proportions Investigations - Frequencies and proportions Treatments - Frequencies and proportions Certainty - Frequencies and proportions Time in department - (N, min, max, mean, SD, median, Q1, Q3)","title":"1.3.2 Attendance Characteristics"},{"location":"documentation/avoidable_admissions_sap/#2-admitted-patient-care-apc-dataset","text":"","title":"2. Admitted Patient Care (APC) Dataset"},{"location":"documentation/avoidable_admissions_sap/#21-analysis-populations","text":"This section describes the analysis populations or the analysis of the APC data. These populations will be referred to in the analysis descriptions that follow.","title":"2.1 Analysis Populations"},{"location":"documentation/avoidable_admissions_sap/#211-all-acute-admissions","text":"This analysis population includes all acute admissions. Filter: (admimeth in 21, 22, 23, 24, 25, 2A, 2B, 2C, 2D, 28) & (epiorder = 1) These filters should have been applied to the original data extract.","title":"2.1.1 All Acute Admissions"},{"location":"documentation/avoidable_admissions_sap/#212-all-acute-admissions-for-acscs","text":"This analysis population includes all acute admissions where the primary diagnosis from the first episode is an ACSC. Filter: (admimeth in 21, 22, 23, 24, 25, 2A, 2B, 2C, 2D, 28) & (epiorder = 1) & (diag_01 = ACSC_Code_APC) Please see HDRUK Data Processing V1 for ASCS_Code_APC definition.","title":"2.1.2 All Acute Admissions for ACSCs"},{"location":"documentation/avoidable_admissions_sap/#213-all-acute-admissions-for-non-acscs","text":"This analysis population includes all acute admissions where the primary diagnosis from the first episode is not an ACSC. Filter: (admimeth in 21, 22, 23, 24, 25, 2A, 2B, 2C, 2D, 28) & (epiorder = 1) & (diag_01 != ACSC_Code_APC) Please see HDRUK Data Processing V1 for ASCS_Code_APC definition.","title":"2.1.3 All Acute Admissions for Non-ACSCs"},{"location":"documentation/avoidable_admissions_sap/#22-demographics","text":"Summary statistics of the patient demographics, admission characteristics and admission outcomes will be calculated. For numerical variables, the minimum (min), maximum (max), mean, standard deviation (SD), median, lower quartile (Q1) and upper quartile (Q3) will be presented with the number of observations used in the calculations. For categorical variables, the number and percentage of patients in each of the categories and the total number of observations will be calculated. Summary statistics for the demographic variables will be presented at the hospital site level (identified using sitret). This analysis will allow the comparison of demographics between different Hospitals. The following summaries will be presented for analysis populations: All Acute Admissions, All Acute Admissions for ACSCs and All Acute Admissions for Non-ACSCs.","title":"2.2 Demographics"},{"location":"documentation/avoidable_admissions_sap/#221-patient-demographics","text":"Age (categorical (to be decided)) - Frequency and proportions Age (continuous) - (N, min, max, mean, SD, median, Q1, Q3) Gender - Frequency and proportions Ethnicity (Categories to be decided) - Frequency and proportions Townsend score decile - Frequencies and proportions Comorbidities - Frequencies and proportions","title":"2.2.1 Patient Demographics"},{"location":"documentation/avoidable_admissions_sap/#222-admission-characteristics","text":"Ambulatory Care Sensitive Condition - Frequencies and proportions (All Acute Admissions for ACSC analysis population only) Source of admission - Frequencies and proportions Day of the week - Frequencies and proportions","title":"2.2.2 Admission Characteristics"},{"location":"documentation/avoidable_admissions_sap/#223-admission-outcomes","text":"Length of stay - (N, min, max, mean, SD, median, Q1, Q3) Length of stay dichotomised (<2 days) Discharge destination - Frequencies and proportions Procedures - Frequencies and proportions","title":"2.2.3 Admission Outcomes"},{"location":"documentation/global_variables/","text":"Population of Interest Study period: >=2021-11-01T00:00:00 to <=2022-10-31T23:59:59 Patients: Admitted Patient Care Dataset: All acute emergency admissions for adults (18 years + on day of admission) that had an admission date within the study period Emergency Care Dataset: All patients attending ED during the study period. Criteria for those at high risk of avoidable admission: The criteria for those at high risk of avoidable admission are considered to be: 36 ambulatory care sensitive conditions 1 . Alternatively this resource can be accessed in the Directory of Ambulatory Emergency Care for Adults Length of stay in hospital Where possible, investigation and treatment received Disease codes associated with ambulatory care sensitive conditions (ACSCs) in common use in the National Health Service (NHS) (n = 19): ACSCs ICD10 codes used in common NHS subset of ACSCs5,12 Additional ICD10 codes used in other subsets of ACSCs within the NHS Angina I20, I24.0 I24.8 I24.9 I25 R072 R073 R074 Z034 Z035a Asthma J45, J46 Cellulitis L03 L04 L08.0 L08.8 L08.9 L88 L98.0 I891 L010 L011 L020 to L024 L028 L029a Congestive heart failure I11.0 I50 J81 I130 I255a [DAECA] Convulsions and epilepsy G40 G41 R56 O15 G253 R568a Chronic obstructive pulmonary disease J20 J41 J42 J43 J47 J44b J40Xa Dehydration and gastroenteritis E86 K52.2 K52.8 K52.9 A020 A04 A059 A072 A080 A081 A083 A084 A085 A09 K520 K521c Dental conditions A69.0 K02 K03 K04 K05 K06 K08 K09.8 K09.9 K12 K13 Diabetes complications E10.0\u2013E10.8 E11.0\u2013E11.8 E12.0\u2013E12.8 E13.0\u2013E13.8 E14.0\u2013E14.8 E139, E149a Ear, nose and throat infections H66 H67 J02 J03 J06 J31.2 J040c Gangrene R02 Hypertension I10 I11.9 Influenza and pneumonia J10 J11 J13 J14 J15.3 J15.4 J15.7 J15.9 J16.8 J18.1 J18 J189 J120 J121 J122 J128 J129 J160 A481 A70xa Iron-deficiency anaemia D50.1 D50.8 D50.9 D460 D461 D463 D464 D510\u2013D513 D518 D520 D521 D528 D529 D531 D571 D580 D581 D590\u2013D592 D599 D601 D608 D609 D610 D611 D640 to D644 D648a Nutritional deficiency E40 E41 E42 E43 E55.0 E64.3 Other vaccine-preventable diseases A35 A36 A37 A80 B05 B06 B16.1 B16.9 B18.0 B18.1 B26 G00.0 M01.4 Pelvic inflammatory disease N70 N73 N74 Perforated/bleeding ulcer K25.0\u2013K25.2 K25.4\u2013K25.6 K26.0\u2013K26.2 K26.4\u2013K26.6 K27.0\u2013K27.2 K27.4\u2013K27.6 K280\u2013282 K284\u2013K286 K920 K921 K922 K20x K210 K219 K221 K226a Pyelonephritis N10 N11 N12 N13.6 N300 N390 N159c N308 N309a ICD, International Classification of Diseases.a; Directory of Ambulatory Emergency Care for Adults 1 Disease codes associated with ambulatory care sensitive conditions (ACSCs) not in common use in the National Health Service (NHS) (n = 17): ACSCs ICD10 codes used to define ACSCsg Alcohol-related diseases F10b Atrial fibrillation and flutter I471 I479 I495 I498 I499 R000 R002 R008a Constipation K590d Deliberate self-harm S16a[HRG code] Failure to thrive R629e Fractured proximal femur S720 S721 S722c Dyspepsia and other stomach function disorders K30 K21d Hypokalaemia E876e Low birth weight P050 P052 P059 P072 P073f Migraine/acute headache G43 G440 G441 G443 G444 G448 R51xa Neuroses E10c E136\u2013E139, E149a Peripheral vascular disease I73 I738 I739e Ruptured appendix K350 K351f Tuberculosis A15 A16 A17A18 A19e Schizophrenia F20 F21 F232 F25c Senility/dementia F00\u2013F03 R54a Stroke I61 I62 I63 I64c I66 I672 I698 R470a 1 ICD, International Classification of Diseases. A; Directory of Ambulatory Emergency Care for Adults.11b; PARR.22c; National Centre for Health Outcomes Development.21d; Sanderson and Dixon.10e; Caminal et al.9f; Agency for Healthcare Research and Quality.8g; Converted where necessary from ICD9 to ICD10 using New Zealand Health Information Service ICD9 to ICD10. Alternative source of ICD10 codes: Directory of Ambulatory Emergency Care for Adults Purdy S, Griffin T, Salisbury C, Sharp D. Ambulatory care sensitive conditions: terminology and disease coding need to be more specific to aid policy makers and clinicians. Public health. 2009 Feb 1;123(2):169-73. DOI \u21a9 \u21a9 \u21a9","title":"Global Variables Statistical Analysis Plan"},{"location":"documentation/global_variables/#population-of-interest","text":"Study period: >=2021-11-01T00:00:00 to <=2022-10-31T23:59:59 Patients: Admitted Patient Care Dataset: All acute emergency admissions for adults (18 years + on day of admission) that had an admission date within the study period Emergency Care Dataset: All patients attending ED during the study period.","title":"Population of Interest"},{"location":"documentation/global_variables/#criteria-for-those-at-high-risk-of-avoidable-admission","text":"The criteria for those at high risk of avoidable admission are considered to be: 36 ambulatory care sensitive conditions 1 . Alternatively this resource can be accessed in the Directory of Ambulatory Emergency Care for Adults Length of stay in hospital Where possible, investigation and treatment received","title":"Criteria for those at high risk of avoidable admission:"},{"location":"documentation/global_variables/#disease-codes-associated-with-ambulatory-care-sensitive-conditions-acscs-in-common-use-in-the-national-health-service-nhs-n-19","text":"ACSCs ICD10 codes used in common NHS subset of ACSCs5,12 Additional ICD10 codes used in other subsets of ACSCs within the NHS Angina I20, I24.0 I24.8 I24.9 I25 R072 R073 R074 Z034 Z035a Asthma J45, J46 Cellulitis L03 L04 L08.0 L08.8 L08.9 L88 L98.0 I891 L010 L011 L020 to L024 L028 L029a Congestive heart failure I11.0 I50 J81 I130 I255a [DAECA] Convulsions and epilepsy G40 G41 R56 O15 G253 R568a Chronic obstructive pulmonary disease J20 J41 J42 J43 J47 J44b J40Xa Dehydration and gastroenteritis E86 K52.2 K52.8 K52.9 A020 A04 A059 A072 A080 A081 A083 A084 A085 A09 K520 K521c Dental conditions A69.0 K02 K03 K04 K05 K06 K08 K09.8 K09.9 K12 K13 Diabetes complications E10.0\u2013E10.8 E11.0\u2013E11.8 E12.0\u2013E12.8 E13.0\u2013E13.8 E14.0\u2013E14.8 E139, E149a Ear, nose and throat infections H66 H67 J02 J03 J06 J31.2 J040c Gangrene R02 Hypertension I10 I11.9 Influenza and pneumonia J10 J11 J13 J14 J15.3 J15.4 J15.7 J15.9 J16.8 J18.1 J18 J189 J120 J121 J122 J128 J129 J160 A481 A70xa Iron-deficiency anaemia D50.1 D50.8 D50.9 D460 D461 D463 D464 D510\u2013D513 D518 D520 D521 D528 D529 D531 D571 D580 D581 D590\u2013D592 D599 D601 D608 D609 D610 D611 D640 to D644 D648a Nutritional deficiency E40 E41 E42 E43 E55.0 E64.3 Other vaccine-preventable diseases A35 A36 A37 A80 B05 B06 B16.1 B16.9 B18.0 B18.1 B26 G00.0 M01.4 Pelvic inflammatory disease N70 N73 N74 Perforated/bleeding ulcer K25.0\u2013K25.2 K25.4\u2013K25.6 K26.0\u2013K26.2 K26.4\u2013K26.6 K27.0\u2013K27.2 K27.4\u2013K27.6 K280\u2013282 K284\u2013K286 K920 K921 K922 K20x K210 K219 K221 K226a Pyelonephritis N10 N11 N12 N13.6 N300 N390 N159c N308 N309a ICD, International Classification of Diseases.a; Directory of Ambulatory Emergency Care for Adults 1","title":"Disease codes associated with ambulatory care sensitive conditions (ACSCs) in common use in the National Health Service (NHS) (n = 19):"},{"location":"documentation/global_variables/#disease-codes-associated-with-ambulatory-care-sensitive-conditions-acscs-not-in-common-use-in-the-national-health-service-nhs-n-17","text":"ACSCs ICD10 codes used to define ACSCsg Alcohol-related diseases F10b Atrial fibrillation and flutter I471 I479 I495 I498 I499 R000 R002 R008a Constipation K590d Deliberate self-harm S16a[HRG code] Failure to thrive R629e Fractured proximal femur S720 S721 S722c Dyspepsia and other stomach function disorders K30 K21d Hypokalaemia E876e Low birth weight P050 P052 P059 P072 P073f Migraine/acute headache G43 G440 G441 G443 G444 G448 R51xa Neuroses E10c E136\u2013E139, E149a Peripheral vascular disease I73 I738 I739e Ruptured appendix K350 K351f Tuberculosis A15 A16 A17A18 A19e Schizophrenia F20 F21 F232 F25c Senility/dementia F00\u2013F03 R54a Stroke I61 I62 I63 I64c I66 I672 I698 R470a 1 ICD, International Classification of Diseases. A; Directory of Ambulatory Emergency Care for Adults.11b; PARR.22c; National Centre for Health Outcomes Development.21d; Sanderson and Dixon.10e; Caminal et al.9f; Agency for Healthcare Research and Quality.8g; Converted where necessary from ICD9 to ICD10 using New Zealand Health Information Service ICD9 to ICD10. Alternative source of ICD10 codes: Directory of Ambulatory Emergency Care for Adults Purdy S, Griffin T, Salisbury C, Sharp D. Ambulatory care sensitive conditions: terminology and disease coding need to be more specific to aid policy makers and clinicians. Public health. 2009 Feb 1;123(2):169-73. DOI \u21a9 \u21a9 \u21a9","title":"Disease codes associated with ambulatory care sensitive conditions (ACSCs) not in common use in the National Health Service (NHS) (n = 17):"},{"location":"documentation/winter_pressures_sap/","text":"Winter Pressures Statistical Analysis Approach Please consult the core protocol from Sheffield for a detailed explanation of the purpose of the project and use that as the primary point of reference not this website which only mirrors their protocol. SUMMARY: We have seen a large increase in waiting times for emergency care across the country. It is not very clear why this is happening, and in order to understand how we can solve the problem, we need to understand this demand and where it is coming from. This study will look at two key areas that are experiencing strain at the moment. Firstly, it will examine anonymised routine data from NHS Emergency Departments (ED) across the country. We will look at patterns of patients attending the ED, who they are, what medical complaints they arrive with and what happens to them. We will also use a tried and tested approach to identifying which patients come to the ED, that could reasonably have been seen by a GP or other non-emergency health service. Secondly the study will examine emergency admissions to hospital to understand who is being admitted to hospital and what happens to them. We will also use established codes to identify patients being admitted with conditions that could be treated in the community (called Ambulatory Care Sensitive Conditions). We plan to see what the variation is in ED attendance and hospital admission between different regions, and at different times of the year to understand greater pressures on emergency care in the winter. We will use our findings to help identify groups of patients where a different pathway of care might improve their experiences and outcomes. This will help us to plan how health services need to be redesigned to meet the needs of the population in a more efficient and effective way. AIMS: To understand the current demand on emergency departments and hospital admissions and how does this vary nationally and throughout the year To explore the demographic factors driving demand for emergency care, particularly in the Winter months To explore which attendances to the emergency department are avoidable, and whether their number and characteristics vary throughout the year To explore which acute admissions to hospital are avoidable, and do their number and characteristics vary throughout the year Objectives Use regional datasets of routine hospital data to define the type of emergency demand, what the national picture is and how this varies by region and season Take an algorithmic approach to describing adults attending the emergency department avoidably Use Ambulatory Care Sensitive Condition codes to define adults being admitted to hospital avoidably Establish a clearer picture of how demand is being created across regions and over the year that can indicate where solutions may lie and propose next steps This study will access and analyse existing routine NHS datasets. These include 12 months of data from 10 regions (sites) including 20 Type I EDs and associated acute hospitals. The study is in two parts using the data to provide a more holistic picture of both demand through ED and acute admission pathways. 1. ECDS (ED) dataset: 1.1 Analysis strata This section describes the analysis strata for the analysis of the ECDS data. These will be referred to in the analysis descriptions that follow. 1.1.1 Attendances by season This analysis population includes all unplanned first emergency care attendances for a new clinical condition (or deterioration of a chronic condition) at Type 1 Emergency Departments (Emergency Departments that are a consultant led 24 hour service with full resuscitation facilities and designated accommodation for the reception of emergency care patients) Filter: (edattendcat = 1) & (eddepttype = 01) These filters should have been applied to the original data extract. Analysis will stratify by season according to two exclusive definitions: i) Six-month winter definition - Winter: 1st October-31st March inclusive (Note start date of data period is 1st Nov 2021; end date is 31st Oct 2022) \u25cb (edarrivaldatetime > \u201c2021/10/31 23:59:59\u201d & edarrivaldatetime < \u201c2022/04/01 00:00:00\u201d ) | (edarrivaldatetime > 2022/09/30 23:59:59 & edarrivaldatetime > 2022/11/01 00:00:00) - Non-winter: 1st April-30th September inclusive \u25cb (edarrivaldatetime > \u201c2022/03/31 23:59:59\u201d & edarrivaldatetime < \u201c2022/10/01 00:00:00\u201d ) ii) Three-month winter definition - Winter: 1st December-28th February inclusive (given 2022 not a leap year) \u25cb (edarrivaldatetime > \u201c2021/11/30 23:59:59\u201d & edarrivaldatetime < \u201c2022/03/01 00:00:00\u201d ) - Non-Winter: 1st March-30th November inclusive \u25cb (edarrivaldatetime > \u201c2021/10/31 23:59:59\u201d & edarrivaldatetime < \u201c2022/12/01 00:00:00\u201d ) | (edarrivaldatetime > \u201c2022/02/28 23:59:59\u201d & edarrivaldatetime < \u201c2022/11/01 00:00:00\u201d ) 1.1.2 Stratification by arrival mode This analysis population further stratifies that described in section 1.1.1. In addition to exploration by season, this will stratify according to arrival mode: - Arrival by ambulance \u25cb edarrivalmode == Ambulance - Arrival by other means \u25cb edarrivalmode != Ambulance 1.1.3 Stratification by time of arrival This analysis population further stratifies that described in section 1.1.1. In addition to exploration by season, this will stratify according to time of arrival: - In-hours arrival: (8am-5:59pm, Monday-Friday) \u25cb (Day of Week in Monday, Tuesday, Wednesday, Thursday, Friday) & (Time of Day > 07:59:59 & Time of Day < 18:00:00) - Out of hours arrival: (Saturday, Sunday, or 6pm-7:59am Monday-Friday) \u25cb (Day of Week in Saturday, Sunday) | ((Day of Week in Monday, Tuesday, Wednesday, Thursday, Friday) & (Time of Day < 08:00:00 | Time of Day > 17:59:59 )) 1.1.4 Stratification by attendance urgency This analysis population further stratifies that described in section 1.1.1. In addition to exploration by season, this will stratify according to the calculated urgency of the attendance (see linked document for definition and calculation): - Urgent attendance - Non-urgent attendance 1.2 Summary Statistics Summary statistics of the patient demographics, attendance characteristics and attendance outcomes will be calculated. For numerical variables, the minimum (min), maximum (max), mean, standard deviation (SD), median, lower quartile (Q1) and upper quartile (Q3) will be presented with the number of observations used in the calculations. For categorical variables, the number and percentage of patients in each of the categories and the total number of observations will be calculated. Summary statistics for the demographic variables will be presented at the hospital site level (identified using edsitecode). This analysis will allow the comparison of demographics between different Emergency Departments and investigate any variation in discharge destination (e.g. variation in admissions). The following summaries will be presented for analysis populations: - All attendances October-March - All attendances April-September - All attendances December-February - All attendances March-November \u25cb All seasonal analysis additionally stratified by arrival mode \u25cb All seasonal analysis additionally stratified by time of arrival \u25cb All seasonal analysis additionally stratified by urgency of attendance 1.2.1 Patient Demographics Age (categorical (to be decided)) - Frequency and proportions Age (continuous) - (N, min, max, mean, SD, median, Q1, Q3) Gender - Frequency and proportions Ethnicity (Categories to be decided) - Frequency and proportions Townsend score decile - Frequencies and proportions Care home flag - Frequencies and proportions Comorbidities - Frequencies and proportions 1.2.2 Attendance Characteristics Arrival mode - Frequencies and proportions (Not to be calculated for arrival mode stratification analysis) Source of attendance (Categories to be decided) - Frequencies and proportions Time of arrival (In hours; out-of-hours) - Frequencies and proportions (Not to be calculated for time of arrival analysis) Acuity - Frequencies and proportions Presenting complaint - Frequencies and proportions Seasonal diagnosis - Frequencies and proportions Investigations - Frequencies and proportions Treatments - Frequencies and proportions Certainty - Frequencies and proportions Discharge destination - Frequencies and proportions 1.2.3 Attendance Outcomes Time in department - (N, min, max, mean, SD, median, Q1, Q3) ED waiting time - (N, min, max, mean, SD, median, Q1, Q3) Non-urgent investigations per attendance - (N, min, max, mean, SD, median, Q1, Q3) Urgent investigations per attendance - (N, min, max, mean, SD, median, Q1, Q3) Non-urgent treatments per attendance - (N, min, max, mean, SD, median, Q1, Q3) Urgent treatments per attendance - (N, min, max, mean, SD, median, Q1, Q3) 1.3 Regression analysis Regression analyses will examine the impact of season on the following outcomes - ED waiting time (minutes; continuous) - Total time in ED (minutes; continuous) - Number of investigations performed (Binary: <=1; >1) - Number of treatments performed (Binary: <=1; >1) ED waiting time and Total time in ED will be modelled using linear regression. Number of investigations and treatments will be modelled using logistic regression. Each model will take season as a main predictor, using six-month and three-month definitions of winter in separate analyses. Each regression will include the following covariates: - Age (continuous) - Sex (Reference category = Male. Collapse indeterminate/unknown into single category) - Ethnicity (Reference category = White. Collapse other/not stated/not known into single category) - Deprivation quintile (Reference category = 1) - Care home flag (Binary. Reference category = No) - Seasonal Diagnosis group (Reference category = None) - Time (binary in/out of hours. Reference category = in-hours) See linked document for further details. 2. Admitted Patient Care (APC) Dataset 2.1 Analysis strata This section describes the analysis strata for the analysis of the APC data. These populations will be referred to in the analysis descriptions that follow. 2.1.1 Acute admissions by season This analysis population includes all acute admissions. Filter: (admimeth in 21, 22, 23, 24, 25, 2A, 2B, 2C, 2D, 28) & (epiorder = 1) These filters should have been applied to the original data extract. Analysis will stratify by season according to two exclusive definitions: i) Six-month winter definition - Winter: 1st October-31st March inclusive (Note start date of data period is 1st Nov 2021; end date is 31st Oct 2022) \u25cb (admidate > \u201c2021/10/31\u201d & admidate < \u201c2022/04/01\u201d ) | (admidate > 2022/09/30 & admidate > 2022/11/01) - Non-winter: 1st April-30th September inclusive \u25cb (admidate > \u201c2022/03/31\u201d & admidate < \u201c2022/10/01\u201d ) ii) Three-month winter definition - Winter: 1st December-28th February inclusive (given 2022 not a leap year) \u25cb (admidate > \u201c2021/11/30\u201d & admidate < \u201c2022/03/01\u201d ) - Non-Winter: 1st March-30th November inclusive \u25cb (admidate > \u201c2021/10/31\u201d & admidate < \u201c2022/12/01\u201d ) | (admidate > \u201c2022/02/28\u201d & admidate < \u201c2022/11/01\u201d ) 2.1.1 Stratification by discharge destination This analysis population further stratifies that described in section 2.1.1. In addition to exploration by season, this will stratify according to discharge destination: - Discharge to care home \u25cb disdest == \u201cCare Home\u201d - Discharge to medical care \u25cb disdest == \u201cMedical Care\u201d - Discharge other \u25cb disdest != \u201cCare Home\u201d & disdest != \u201cMedical Care\u201d 2.1.2 Stratification by time of admission This analysis population further stratifies that described in section 2.1.1. In addition to exploration by season, this will stratify according to time of admission: - In-hours arrival: (8am-5:59pm, Monday-Friday) \u25cb (Day of Week in Monday, Tuesday, Wednesday, Thursday, Friday) & (Time of Day > 07:59:59 & Time of Day < 18:00:00) - Out of hours arrival: (Saturday, Sunday, or 6pm-7:59am Monday-Friday) \u25cb (Day of Week in Saturday, Sunday) | ((Day of Week in Monday, Tuesday, Wednesday, Thursday, Friday) & (Time of Day < 08:00:00 | Time of Day > 17:59:59 )) 2.1.3 Stratification by Avoidability (ACSC) This analysis population further stratifies that described in section 2.1.1. In addition to exploration by season, this will stratify according to the avoidability of the admission, defined as an Ambulatory Care Sensitive Condition (ACSC). - Avoidable admission (ACSC) - Non-avoidable admission (Non-ACSC) ACSC definitions can be found in the accompanying Avoidable Admissions project ACSC code list. 2.2 Demographics Summary statistics of the patient demographics, admission characteristics and admission outcomes will be calculated. For numerical variables, the minimum (min), maximum (max), mean, standard deviation (SD), median, lower quartile (Q1) and upper quartile (Q3) will be presented with the number of observations used in the calculations. For categorical variables, the number and percentage of patients in each of the categories and the total number of observations will be calculated. Summary statistics for the demographic variables will be presented at the hospital site level (identified using sitret). This analysis will allow the comparison of demographics between different Hospitals. The following summaries will be presented for analysis populations: - All admissions October-March - All admissions April-September - All admissions December-February - All admissions March-November \u25cb All seasonal analysis additionally stratified by discharge destination \u25cb All seasonal analysis additionally stratified by time of admission \u25cb All seasonal analysis additionally stratified by avoidability (ACSC) 2.2.1 Patient Demographics Age (categorical (to be decided)) - Frequency and proportions Age (continuous) - (N, min, max, mean, SD, median, Q1, Q3) Gender - Frequency and proportions Ethnicity (Categories to be decided) - Frequency and proportions Townsend score decile - Frequencies and proportions Care Home Flag - Frequencies and proportions Comorbidities - Frequencies and proportions 2.2.2 Admission Characteristics Source of admission - Frequencies and proportions Time of admission - (In hours; out of hours) - Frequencies and proportions (Not to be calculated for time of admission analysis) Seasonal diagnosis - Frequencies and proportions Discharge destination - Frequencies and proportions 2.2.3 Admission Outcomes Length of stay - (N, min, max, mean, SD, median, Q1, Q3) Length of stay dichotomised (<2 days) Procedures per attendance - (N, min, max, mean, SD, median, Q1, Q3) Procedures dichotomised (<2 procedures) Days ready for discharge - (N, min, max, mean, SD, median, Q1, Q3) Days ready for discharge dichotomised (<2 days) Admission type - Frequencies and proportions 2.3 Regression analysis Regression analyses will examine the impact of season on the following outcomes - Length of stay (Binary; <2 days; >= 2 days) - Number of procedures performed (Binary: <2; >=2) - Days ready for discharge (Binary: <2; >=2) - Avoidable admission (Binary; Yes; No) All outcomes will be modelled using logistic regression. Each model will take season as a main predictor, using six-month and three-month definitions of winter in separate analyses. Each regression will include the following covariates: - Age (continuous) - Sex (Reference category = Male. Collapse indeterminate/unknown into single category) - Ethnicity (Reference category = White. Collapse other/not stated/not known into single category) - Deprivation quintile (Reference category = 1) - Care home flag (Binary. Reference category = No) - Seasonal Diagnosis group (Reference category = None) - Time (binary in/out of hours. Reference category = in-hours)","title":"Winter Pressures Statistical Analysis Plan"},{"location":"documentation/winter_pressures_sap/#winter-pressures-statistical-analysis-approach","text":"Please consult the core protocol from Sheffield for a detailed explanation of the purpose of the project and use that as the primary point of reference not this website which only mirrors their protocol.","title":"Winter Pressures Statistical Analysis Approach"},{"location":"documentation/winter_pressures_sap/#summary","text":"We have seen a large increase in waiting times for emergency care across the country. It is not very clear why this is happening, and in order to understand how we can solve the problem, we need to understand this demand and where it is coming from. This study will look at two key areas that are experiencing strain at the moment. Firstly, it will examine anonymised routine data from NHS Emergency Departments (ED) across the country. We will look at patterns of patients attending the ED, who they are, what medical complaints they arrive with and what happens to them. We will also use a tried and tested approach to identifying which patients come to the ED, that could reasonably have been seen by a GP or other non-emergency health service. Secondly the study will examine emergency admissions to hospital to understand who is being admitted to hospital and what happens to them. We will also use established codes to identify patients being admitted with conditions that could be treated in the community (called Ambulatory Care Sensitive Conditions). We plan to see what the variation is in ED attendance and hospital admission between different regions, and at different times of the year to understand greater pressures on emergency care in the winter. We will use our findings to help identify groups of patients where a different pathway of care might improve their experiences and outcomes. This will help us to plan how health services need to be redesigned to meet the needs of the population in a more efficient and effective way.","title":"SUMMARY:"},{"location":"documentation/winter_pressures_sap/#aims","text":"To understand the current demand on emergency departments and hospital admissions and how does this vary nationally and throughout the year To explore the demographic factors driving demand for emergency care, particularly in the Winter months To explore which attendances to the emergency department are avoidable, and whether their number and characteristics vary throughout the year To explore which acute admissions to hospital are avoidable, and do their number and characteristics vary throughout the year","title":"AIMS:"},{"location":"documentation/winter_pressures_sap/#objectives","text":"Use regional datasets of routine hospital data to define the type of emergency demand, what the national picture is and how this varies by region and season Take an algorithmic approach to describing adults attending the emergency department avoidably Use Ambulatory Care Sensitive Condition codes to define adults being admitted to hospital avoidably Establish a clearer picture of how demand is being created across regions and over the year that can indicate where solutions may lie and propose next steps This study will access and analyse existing routine NHS datasets. These include 12 months of data from 10 regions (sites) including 20 Type I EDs and associated acute hospitals. The study is in two parts using the data to provide a more holistic picture of both demand through ED and acute admission pathways.","title":"Objectives"},{"location":"documentation/winter_pressures_sap/#1-ecds-ed-dataset","text":"","title":"1. ECDS (ED) dataset:"},{"location":"documentation/winter_pressures_sap/#11-analysis-strata","text":"This section describes the analysis strata for the analysis of the ECDS data. These will be referred to in the analysis descriptions that follow.","title":"1.1 Analysis strata"},{"location":"documentation/winter_pressures_sap/#111-attendances-by-season","text":"This analysis population includes all unplanned first emergency care attendances for a new clinical condition (or deterioration of a chronic condition) at Type 1 Emergency Departments (Emergency Departments that are a consultant led 24 hour service with full resuscitation facilities and designated accommodation for the reception of emergency care patients) Filter: (edattendcat = 1) & (eddepttype = 01) These filters should have been applied to the original data extract. Analysis will stratify by season according to two exclusive definitions: i) Six-month winter definition - Winter: 1st October-31st March inclusive (Note start date of data period is 1st Nov 2021; end date is 31st Oct 2022) \u25cb (edarrivaldatetime > \u201c2021/10/31 23:59:59\u201d & edarrivaldatetime < \u201c2022/04/01 00:00:00\u201d ) | (edarrivaldatetime > 2022/09/30 23:59:59 & edarrivaldatetime > 2022/11/01 00:00:00) - Non-winter: 1st April-30th September inclusive \u25cb (edarrivaldatetime > \u201c2022/03/31 23:59:59\u201d & edarrivaldatetime < \u201c2022/10/01 00:00:00\u201d ) ii) Three-month winter definition - Winter: 1st December-28th February inclusive (given 2022 not a leap year) \u25cb (edarrivaldatetime > \u201c2021/11/30 23:59:59\u201d & edarrivaldatetime < \u201c2022/03/01 00:00:00\u201d ) - Non-Winter: 1st March-30th November inclusive \u25cb (edarrivaldatetime > \u201c2021/10/31 23:59:59\u201d & edarrivaldatetime < \u201c2022/12/01 00:00:00\u201d ) | (edarrivaldatetime > \u201c2022/02/28 23:59:59\u201d & edarrivaldatetime < \u201c2022/11/01 00:00:00\u201d )","title":"1.1.1 Attendances by season"},{"location":"documentation/winter_pressures_sap/#112-stratification-by-arrival-mode","text":"This analysis population further stratifies that described in section 1.1.1. In addition to exploration by season, this will stratify according to arrival mode: - Arrival by ambulance \u25cb edarrivalmode == Ambulance - Arrival by other means \u25cb edarrivalmode != Ambulance","title":"1.1.2 Stratification by arrival mode"},{"location":"documentation/winter_pressures_sap/#113-stratification-by-time-of-arrival","text":"This analysis population further stratifies that described in section 1.1.1. In addition to exploration by season, this will stratify according to time of arrival: - In-hours arrival: (8am-5:59pm, Monday-Friday) \u25cb (Day of Week in Monday, Tuesday, Wednesday, Thursday, Friday) & (Time of Day > 07:59:59 & Time of Day < 18:00:00) - Out of hours arrival: (Saturday, Sunday, or 6pm-7:59am Monday-Friday) \u25cb (Day of Week in Saturday, Sunday) | ((Day of Week in Monday, Tuesday, Wednesday, Thursday, Friday) & (Time of Day < 08:00:00 | Time of Day > 17:59:59 ))","title":"1.1.3 Stratification by time of arrival"},{"location":"documentation/winter_pressures_sap/#114-stratification-by-attendance-urgency","text":"This analysis population further stratifies that described in section 1.1.1. In addition to exploration by season, this will stratify according to the calculated urgency of the attendance (see linked document for definition and calculation): - Urgent attendance - Non-urgent attendance","title":"1.1.4 Stratification by attendance urgency"},{"location":"documentation/winter_pressures_sap/#12-summary-statistics","text":"Summary statistics of the patient demographics, attendance characteristics and attendance outcomes will be calculated. For numerical variables, the minimum (min), maximum (max), mean, standard deviation (SD), median, lower quartile (Q1) and upper quartile (Q3) will be presented with the number of observations used in the calculations. For categorical variables, the number and percentage of patients in each of the categories and the total number of observations will be calculated. Summary statistics for the demographic variables will be presented at the hospital site level (identified using edsitecode). This analysis will allow the comparison of demographics between different Emergency Departments and investigate any variation in discharge destination (e.g. variation in admissions). The following summaries will be presented for analysis populations: - All attendances October-March - All attendances April-September - All attendances December-February - All attendances March-November \u25cb All seasonal analysis additionally stratified by arrival mode \u25cb All seasonal analysis additionally stratified by time of arrival \u25cb All seasonal analysis additionally stratified by urgency of attendance","title":"1.2 Summary Statistics"},{"location":"documentation/winter_pressures_sap/#121-patient-demographics","text":"Age (categorical (to be decided)) - Frequency and proportions Age (continuous) - (N, min, max, mean, SD, median, Q1, Q3) Gender - Frequency and proportions Ethnicity (Categories to be decided) - Frequency and proportions Townsend score decile - Frequencies and proportions Care home flag - Frequencies and proportions Comorbidities - Frequencies and proportions","title":"1.2.1 Patient Demographics"},{"location":"documentation/winter_pressures_sap/#122-attendance-characteristics","text":"Arrival mode - Frequencies and proportions (Not to be calculated for arrival mode stratification analysis) Source of attendance (Categories to be decided) - Frequencies and proportions Time of arrival (In hours; out-of-hours) - Frequencies and proportions (Not to be calculated for time of arrival analysis) Acuity - Frequencies and proportions Presenting complaint - Frequencies and proportions Seasonal diagnosis - Frequencies and proportions Investigations - Frequencies and proportions Treatments - Frequencies and proportions Certainty - Frequencies and proportions Discharge destination - Frequencies and proportions","title":"1.2.2 Attendance Characteristics"},{"location":"documentation/winter_pressures_sap/#123-attendance-outcomes","text":"Time in department - (N, min, max, mean, SD, median, Q1, Q3) ED waiting time - (N, min, max, mean, SD, median, Q1, Q3) Non-urgent investigations per attendance - (N, min, max, mean, SD, median, Q1, Q3) Urgent investigations per attendance - (N, min, max, mean, SD, median, Q1, Q3) Non-urgent treatments per attendance - (N, min, max, mean, SD, median, Q1, Q3) Urgent treatments per attendance - (N, min, max, mean, SD, median, Q1, Q3)","title":"1.2.3 Attendance Outcomes"},{"location":"documentation/winter_pressures_sap/#13-regression-analysis","text":"Regression analyses will examine the impact of season on the following outcomes - ED waiting time (minutes; continuous) - Total time in ED (minutes; continuous) - Number of investigations performed (Binary: <=1; >1) - Number of treatments performed (Binary: <=1; >1) ED waiting time and Total time in ED will be modelled using linear regression. Number of investigations and treatments will be modelled using logistic regression. Each model will take season as a main predictor, using six-month and three-month definitions of winter in separate analyses. Each regression will include the following covariates: - Age (continuous) - Sex (Reference category = Male. Collapse indeterminate/unknown into single category) - Ethnicity (Reference category = White. Collapse other/not stated/not known into single category) - Deprivation quintile (Reference category = 1) - Care home flag (Binary. Reference category = No) - Seasonal Diagnosis group (Reference category = None) - Time (binary in/out of hours. Reference category = in-hours) See linked document for further details.","title":"1.3 Regression analysis"},{"location":"documentation/winter_pressures_sap/#2-admitted-patient-care-apc-dataset","text":"","title":"2. Admitted Patient Care (APC) Dataset"},{"location":"documentation/winter_pressures_sap/#21-analysis-strata","text":"This section describes the analysis strata for the analysis of the APC data. These populations will be referred to in the analysis descriptions that follow.","title":"2.1 Analysis strata"},{"location":"documentation/winter_pressures_sap/#211-acute-admissions-by-season","text":"This analysis population includes all acute admissions. Filter: (admimeth in 21, 22, 23, 24, 25, 2A, 2B, 2C, 2D, 28) & (epiorder = 1) These filters should have been applied to the original data extract. Analysis will stratify by season according to two exclusive definitions: i) Six-month winter definition - Winter: 1st October-31st March inclusive (Note start date of data period is 1st Nov 2021; end date is 31st Oct 2022) \u25cb (admidate > \u201c2021/10/31\u201d & admidate < \u201c2022/04/01\u201d ) | (admidate > 2022/09/30 & admidate > 2022/11/01) - Non-winter: 1st April-30th September inclusive \u25cb (admidate > \u201c2022/03/31\u201d & admidate < \u201c2022/10/01\u201d ) ii) Three-month winter definition - Winter: 1st December-28th February inclusive (given 2022 not a leap year) \u25cb (admidate > \u201c2021/11/30\u201d & admidate < \u201c2022/03/01\u201d ) - Non-Winter: 1st March-30th November inclusive \u25cb (admidate > \u201c2021/10/31\u201d & admidate < \u201c2022/12/01\u201d ) | (admidate > \u201c2022/02/28\u201d & admidate < \u201c2022/11/01\u201d )","title":"2.1.1 Acute admissions by season"},{"location":"documentation/winter_pressures_sap/#211-stratification-by-discharge-destination","text":"This analysis population further stratifies that described in section 2.1.1. In addition to exploration by season, this will stratify according to discharge destination: - Discharge to care home \u25cb disdest == \u201cCare Home\u201d - Discharge to medical care \u25cb disdest == \u201cMedical Care\u201d - Discharge other \u25cb disdest != \u201cCare Home\u201d & disdest != \u201cMedical Care\u201d","title":"2.1.1 Stratification by discharge destination"},{"location":"documentation/winter_pressures_sap/#212-stratification-by-time-of-admission","text":"This analysis population further stratifies that described in section 2.1.1. In addition to exploration by season, this will stratify according to time of admission: - In-hours arrival: (8am-5:59pm, Monday-Friday) \u25cb (Day of Week in Monday, Tuesday, Wednesday, Thursday, Friday) & (Time of Day > 07:59:59 & Time of Day < 18:00:00) - Out of hours arrival: (Saturday, Sunday, or 6pm-7:59am Monday-Friday) \u25cb (Day of Week in Saturday, Sunday) | ((Day of Week in Monday, Tuesday, Wednesday, Thursday, Friday) & (Time of Day < 08:00:00 | Time of Day > 17:59:59 ))","title":"2.1.2 Stratification by time of admission"},{"location":"documentation/winter_pressures_sap/#213-stratification-by-avoidability-acsc","text":"This analysis population further stratifies that described in section 2.1.1. In addition to exploration by season, this will stratify according to the avoidability of the admission, defined as an Ambulatory Care Sensitive Condition (ACSC). - Avoidable admission (ACSC) - Non-avoidable admission (Non-ACSC) ACSC definitions can be found in the accompanying Avoidable Admissions project ACSC code list.","title":"2.1.3 Stratification by Avoidability (ACSC)"},{"location":"documentation/winter_pressures_sap/#22-demographics","text":"Summary statistics of the patient demographics, admission characteristics and admission outcomes will be calculated. For numerical variables, the minimum (min), maximum (max), mean, standard deviation (SD), median, lower quartile (Q1) and upper quartile (Q3) will be presented with the number of observations used in the calculations. For categorical variables, the number and percentage of patients in each of the categories and the total number of observations will be calculated. Summary statistics for the demographic variables will be presented at the hospital site level (identified using sitret). This analysis will allow the comparison of demographics between different Hospitals. The following summaries will be presented for analysis populations: - All admissions October-March - All admissions April-September - All admissions December-February - All admissions March-November \u25cb All seasonal analysis additionally stratified by discharge destination \u25cb All seasonal analysis additionally stratified by time of admission \u25cb All seasonal analysis additionally stratified by avoidability (ACSC)","title":"2.2 Demographics"},{"location":"documentation/winter_pressures_sap/#221-patient-demographics","text":"Age (categorical (to be decided)) - Frequency and proportions Age (continuous) - (N, min, max, mean, SD, median, Q1, Q3) Gender - Frequency and proportions Ethnicity (Categories to be decided) - Frequency and proportions Townsend score decile - Frequencies and proportions Care Home Flag - Frequencies and proportions Comorbidities - Frequencies and proportions","title":"2.2.1 Patient Demographics"},{"location":"documentation/winter_pressures_sap/#222-admission-characteristics","text":"Source of admission - Frequencies and proportions Time of admission - (In hours; out of hours) - Frequencies and proportions (Not to be calculated for time of admission analysis) Seasonal diagnosis - Frequencies and proportions Discharge destination - Frequencies and proportions","title":"2.2.2 Admission Characteristics"},{"location":"documentation/winter_pressures_sap/#223-admission-outcomes","text":"Length of stay - (N, min, max, mean, SD, median, Q1, Q3) Length of stay dichotomised (<2 days) Procedures per attendance - (N, min, max, mean, SD, median, Q1, Q3) Procedures dichotomised (<2 procedures) Days ready for discharge - (N, min, max, mean, SD, median, Q1, Q3) Days ready for discharge dichotomised (<2 days) Admission type - Frequencies and proportions","title":"2.2.3 Admission Outcomes"},{"location":"documentation/winter_pressures_sap/#23-regression-analysis","text":"Regression analyses will examine the impact of season on the following outcomes - Length of stay (Binary; <2 days; >= 2 days) - Number of procedures performed (Binary: <2; >=2) - Days ready for discharge (Binary: <2; >=2) - Avoidable admission (Binary; Yes; No) All outcomes will be modelled using logistic regression. Each model will take season as a main predictor, using six-month and three-month definitions of winter in separate analyses. Each regression will include the following covariates: - Age (continuous) - Sex (Reference category = Male. Collapse indeterminate/unknown into single category) - Ethnicity (Reference category = White. Collapse other/not stated/not known into single category) - Deprivation quintile (Reference category = 1) - Care home flag (Binary. Reference category = No) - Seasonal Diagnosis group (Reference category = None) - Time (binary in/out of hours. Reference category = in-hours)","title":"2.3 Regression analysis"},{"location":"how_to_guides/from_extraction_to_feature_engineering/","text":"Data Harmonization If we reference our initial project data schema we can see the stages needed to perform harmonization: We attempted in the last round to try a validation and it failed. For the purposes of demonstrating what a good synthetic dataset would look like we are going to start by loading this in and validating it as we did last time. New Dataset We have now gone back to obtain a new dataset (hopefully this won't have to happen too many times for each site). Unfortunately it is typically required thus why pipelines are so important in these types of projects to minimise project overhead. Let's load the data in (new dataset): df = pd.read_csv(\"synthetic_data/sdv_hdruk_admitted_care_synthetic_data.csv\") First Validation This time we have ajusted our SQL / python / R code and the data is looking much better so lets try to validate it. Excellent. This time we have had at least partial success with our new extract. And this time our validations are partially successful but we are still getting some failures Lets inspect those failures - called 'bad' in this example: bad[[\"schema_context\", \"column\", \"check\", \"check_number\", \"failure_case\", \"index\"]] We can see that the dates are out - thus why these failed. Feature Engineering We need to perform feature engineering as per the protocol to check our work and ensure everything matches. This can potentially be done in a single line dfa_features = aa.features.build_features.build_admitted_care_features(good.copy()) Pandas Profiling We are now in a position to try and visualise our synthetic admissions data to see visually how high quality the data is. We can do this with the pandas profiling package which we have loaded into the ipython notebook. We can see that because this data is synthetic most of the variables cluster around a normal distribution - some of this is legitimate but some of it is not. It gives us a good idea therefore how high quality the data will be going into the next stage. We will next need to harmonize the ED data however.","title":"Step 4) From Extraction to Feature Engineering (Part1 Harmonization)"},{"location":"how_to_guides/from_extraction_to_feature_engineering/#data-harmonization","text":"If we reference our initial project data schema we can see the stages needed to perform harmonization: We attempted in the last round to try a validation and it failed. For the purposes of demonstrating what a good synthetic dataset would look like we are going to start by loading this in and validating it as we did last time.","title":"Data Harmonization"},{"location":"how_to_guides/from_extraction_to_feature_engineering/#new-dataset","text":"We have now gone back to obtain a new dataset (hopefully this won't have to happen too many times for each site). Unfortunately it is typically required thus why pipelines are so important in these types of projects to minimise project overhead. Let's load the data in (new dataset): df = pd.read_csv(\"synthetic_data/sdv_hdruk_admitted_care_synthetic_data.csv\")","title":"New Dataset"},{"location":"how_to_guides/from_extraction_to_feature_engineering/#first-validation","text":"This time we have ajusted our SQL / python / R code and the data is looking much better so lets try to validate it. Excellent. This time we have had at least partial success with our new extract. And this time our validations are partially successful but we are still getting some failures Lets inspect those failures - called 'bad' in this example: bad[[\"schema_context\", \"column\", \"check\", \"check_number\", \"failure_case\", \"index\"]] We can see that the dates are out - thus why these failed.","title":"First Validation"},{"location":"how_to_guides/from_extraction_to_feature_engineering/#feature-engineering","text":"We need to perform feature engineering as per the protocol to check our work and ensure everything matches. This can potentially be done in a single line dfa_features = aa.features.build_features.build_admitted_care_features(good.copy())","title":"Feature Engineering"},{"location":"how_to_guides/from_extraction_to_feature_engineering/#pandas-profiling","text":"We are now in a position to try and visualise our synthetic admissions data to see visually how high quality the data is. We can do this with the pandas profiling package which we have loaded into the ipython notebook. We can see that because this data is synthetic most of the variables cluster around a normal distribution - some of this is legitimate but some of it is not. It gives us a good idea therefore how high quality the data will be going into the next stage. We will next need to harmonize the ED data however.","title":"Pandas Profiling"},{"location":"how_to_guides/from_notebook_to_data_extract/","text":"Using a notebook / jupyter lab Once you have the notebook or lab working your view should look something like this (lab displayed below). You need nothing else to run the pipeline. If you don't have a strong preference I recommend using the lab as it has more features and provides a very satisfactory browser based programming environment completely for free on almost any machine. Why a notebook? Data based projects tend to be very iterative. Notebooks although terrible for production allow a lot of experimentation and testing which is what is needed while learning. They allow us here to strike an optimal balance between all the sites as they minimise the need for software engineering skill while maximising results and visibility for the analyst. Opening a notebook First navigate to the data extraction folder. Then open the data extraction notebook - data_extraction.ipynb It should look something like this: Importing packages In order to use the notebook you need to first import the packages. This is done in the first line of the notebook with the lines: import numpy as np import pandas as pd import avoidable_admissions as aa if this doesn't work it is because python can't find the avoidable admissions package. This is probably because it was installed properly in the earlier steps. A quick way to fix this is to copy this into the data_extraction folder but if you ran through the previous steps in order it should work and copying in the module is not recommended. NB. The data used in this repository is entirely artificatial and was generated using NHSx Synthic VAE Data - it is intentially of low quality to illustrate the validator failing. Loading in dataset In this tutorial we are going to use a synthetic dataset we generated specifically for this project. Thanks to Vishnu for creating this. We load in the dataset as follows: df = pd.read_csv(\"synthetic_data/sdv_hdruk_admitted_care_synthetic_data.csv\", dtype=str) Pandas is a python package for handling data. You will need to load your data in via whatever means relevant. You can use pd.read_csv(), pd.read_excel(), pd.read_sql() or any other pandas method to load the data in. The aim is not to be too prescriptive here but if you would like more info on how to load data into a notebook using pure SQL please check out NHS SQL Querying in a Notebook Examples which explains all the steps needed to do this with a couple of examples. We now use neither of these methods but they are good stepping stones to learning how to do this. Manipulating the Data You can use the python notebook to manipulate the data as demonstrated here. The first step is to re-format the data correctly. A simple re-mapping technique is demonstrated here. This process is best done with SQL if possible upon extract but not everyone has that luxury First Validation Oh dear that didn't go very well and we get a horrible stack trace as below: This means we need to do more work on our dataset before it will pass validation. Presently we have Total number of rows in input data : 20000 Number of rows that passed validation: 0 Number of rows that failed validation: 40014 but at least we have some data which is a good start.","title":"Step 3) From Notebook/Lab to Extraction and First Validation"},{"location":"how_to_guides/from_notebook_to_data_extract/#using-a-notebook-jupyter-lab","text":"Once you have the notebook or lab working your view should look something like this (lab displayed below). You need nothing else to run the pipeline. If you don't have a strong preference I recommend using the lab as it has more features and provides a very satisfactory browser based programming environment completely for free on almost any machine.","title":"Using a notebook / jupyter lab"},{"location":"how_to_guides/from_notebook_to_data_extract/#why-a-notebook","text":"Data based projects tend to be very iterative. Notebooks although terrible for production allow a lot of experimentation and testing which is what is needed while learning. They allow us here to strike an optimal balance between all the sites as they minimise the need for software engineering skill while maximising results and visibility for the analyst.","title":"Why a notebook?"},{"location":"how_to_guides/from_notebook_to_data_extract/#opening-a-notebook","text":"First navigate to the data extraction folder. Then open the data extraction notebook - data_extraction.ipynb It should look something like this:","title":"Opening a notebook"},{"location":"how_to_guides/from_notebook_to_data_extract/#importing-packages","text":"In order to use the notebook you need to first import the packages. This is done in the first line of the notebook with the lines: import numpy as np import pandas as pd import avoidable_admissions as aa if this doesn't work it is because python can't find the avoidable admissions package. This is probably because it was installed properly in the earlier steps. A quick way to fix this is to copy this into the data_extraction folder but if you ran through the previous steps in order it should work and copying in the module is not recommended. NB. The data used in this repository is entirely artificatial and was generated using NHSx Synthic VAE Data - it is intentially of low quality to illustrate the validator failing.","title":"Importing packages"},{"location":"how_to_guides/from_notebook_to_data_extract/#loading-in-dataset","text":"In this tutorial we are going to use a synthetic dataset we generated specifically for this project. Thanks to Vishnu for creating this. We load in the dataset as follows: df = pd.read_csv(\"synthetic_data/sdv_hdruk_admitted_care_synthetic_data.csv\", dtype=str) Pandas is a python package for handling data. You will need to load your data in via whatever means relevant. You can use pd.read_csv(), pd.read_excel(), pd.read_sql() or any other pandas method to load the data in. The aim is not to be too prescriptive here but if you would like more info on how to load data into a notebook using pure SQL please check out NHS SQL Querying in a Notebook Examples which explains all the steps needed to do this with a couple of examples. We now use neither of these methods but they are good stepping stones to learning how to do this.","title":"Loading in dataset"},{"location":"how_to_guides/from_notebook_to_data_extract/#manipulating-the-data","text":"You can use the python notebook to manipulate the data as demonstrated here. The first step is to re-format the data correctly. A simple re-mapping technique is demonstrated here. This process is best done with SQL if possible upon extract but not everyone has that luxury","title":"Manipulating the Data"},{"location":"how_to_guides/from_notebook_to_data_extract/#first-validation","text":"Oh dear that didn't go very well and we get a horrible stack trace as below: This means we need to do more work on our dataset before it will pass validation. Presently we have Total number of rows in input data : 20000 Number of rows that passed validation: 0 Number of rows that failed validation: 40014 but at least we have some data which is a good start.","title":"First Validation"},{"location":"how_to_guides/from_terminal_to_notebook/","text":"Start Point By this point in the tutorial you should have a terminal up on your screen which looks something like this: If so you are good to move to the next stage. Get to Root Folder You now need to navigate to the root folder where the collaboration repository is sitting. to get there type cd {PATH_TO_REPOSITORY} This should work in both Windows and Linux. Installing Mamba To install mamba you need to call: conda install mamba -n base -c conda-forge In the base directory of your minicondas installation. This is the best and most reliable way to install it. Seems like extra work installing all these things (and it is) but the end result will be worthwhile in terms of having a robust environment to work in. You can install it with pip but conda-forge is a better option if available to you. Important: :no_entry: This has typically been the slowest step when I have run it so be patient while it is running. It only needs to be done once. Creating The Virtual Environment Now you are in the root folder with minicondas activated you are ready to create the virtual environment. A virtual environment is just a seperate computing environment which is controlled and won't interfere with the base or other environments. They are disposable and indispensible when programming as they allow you to customise things for particular projects and avoid dependencies conflits. To set it up do the following: Execute ./init.bat - or .sh if in linux This will take a short while to run but when it is finished you will have a fully functional python environment to run all the commands to come. This is called hdruk_aa presently but you can rename it in the yaml file if you want to. The only bit you need to change to create a new but similar environment is this line in the environment.yaml file. (YAML files are typically just configuration files.) change the line name: hdruk_aa to create a different environment with a different name. Only edit the rest if you know what you are doing or you might break the environment setup but it is there for those that need to change it. When I was experimenting with this I tried various different environments and python versions tagging '_py3_11' etc onto the end to try them out. At the end you can delete all the ones you don't want. However, if you are new try to just create one and work with that to reduce complexity. Activating the environment Activate the environment with conda activate hdruk_aa or whatever you have called it. As long as you are in base this should work. Installing the avoidable admissions module There is another module you need to successfully install to be able to use the packages. This is the data validation module developed by LTHTR. To install it you need to call the following in the terminal: pip install \"avoidable_admissions[eda] @ git+https://github.com/LTHTR-DST/hdruk_avoidable_admissions.git@{choose_release version}\" So if I wanted to install a production version I could call (fictional call): pip install \"avoidable_admissions[eda] @ git+https://github.com/LTHTR-DST/hdruk_avoidable_admissions.git@v1-beta\" You will need to check the repository here to see which production version is currently the most up to date: Latest_Releases Launching the Notebook You are now ready to launch the notebook or lab. Notebooks are simpler but juptyer-lab has more functionality. Feel free to experiment with whatever you prefer. To launch a simple notebook call: python -m notebook Or to start JupyterLab call jupyter-lab These should open up a browser window in your root directory and you are then ready to start coding.","title":"Step 2) From Terminal to Notebook/Lab"},{"location":"how_to_guides/from_terminal_to_notebook/#start-point","text":"By this point in the tutorial you should have a terminal up on your screen which looks something like this: If so you are good to move to the next stage.","title":"Start Point"},{"location":"how_to_guides/from_terminal_to_notebook/#get-to-root-folder","text":"You now need to navigate to the root folder where the collaboration repository is sitting. to get there type cd {PATH_TO_REPOSITORY} This should work in both Windows and Linux.","title":"Get to Root Folder"},{"location":"how_to_guides/from_terminal_to_notebook/#installing-mamba","text":"To install mamba you need to call: conda install mamba -n base -c conda-forge In the base directory of your minicondas installation. This is the best and most reliable way to install it. Seems like extra work installing all these things (and it is) but the end result will be worthwhile in terms of having a robust environment to work in. You can install it with pip but conda-forge is a better option if available to you. Important: :no_entry: This has typically been the slowest step when I have run it so be patient while it is running. It only needs to be done once.","title":"Installing Mamba"},{"location":"how_to_guides/from_terminal_to_notebook/#creating-the-virtual-environment","text":"Now you are in the root folder with minicondas activated you are ready to create the virtual environment. A virtual environment is just a seperate computing environment which is controlled and won't interfere with the base or other environments. They are disposable and indispensible when programming as they allow you to customise things for particular projects and avoid dependencies conflits. To set it up do the following: Execute ./init.bat - or .sh if in linux This will take a short while to run but when it is finished you will have a fully functional python environment to run all the commands to come. This is called hdruk_aa presently but you can rename it in the yaml file if you want to. The only bit you need to change to create a new but similar environment is this line in the environment.yaml file. (YAML files are typically just configuration files.) change the line name: hdruk_aa to create a different environment with a different name. Only edit the rest if you know what you are doing or you might break the environment setup but it is there for those that need to change it. When I was experimenting with this I tried various different environments and python versions tagging '_py3_11' etc onto the end to try them out. At the end you can delete all the ones you don't want. However, if you are new try to just create one and work with that to reduce complexity.","title":"Creating The Virtual Environment"},{"location":"how_to_guides/from_terminal_to_notebook/#activating-the-environment","text":"Activate the environment with conda activate hdruk_aa or whatever you have called it. As long as you are in base this should work.","title":"Activating the environment"},{"location":"how_to_guides/from_terminal_to_notebook/#installing-the-avoidable-admissions-module","text":"There is another module you need to successfully install to be able to use the packages. This is the data validation module developed by LTHTR. To install it you need to call the following in the terminal: pip install \"avoidable_admissions[eda] @ git+https://github.com/LTHTR-DST/hdruk_avoidable_admissions.git@{choose_release version}\" So if I wanted to install a production version I could call (fictional call): pip install \"avoidable_admissions[eda] @ git+https://github.com/LTHTR-DST/hdruk_avoidable_admissions.git@v1-beta\" You will need to check the repository here to see which production version is currently the most up to date: Latest_Releases","title":"Installing the avoidable admissions module"},{"location":"how_to_guides/from_terminal_to_notebook/#launching-the-notebook","text":"You are now ready to launch the notebook or lab. Notebooks are simpler but juptyer-lab has more functionality. Feel free to experiment with whatever you prefer. To launch a simple notebook call: python -m notebook Or to start JupyterLab call jupyter-lab These should open up a browser window in your root directory and you are then ready to start coding.","title":"Launching the Notebook"},{"location":"how_to_guides/new_to_python/","text":"Why Bother Building a RAP? Before we go through how to set everything up we should probably explain why we are going to all this effort. The answer is to achieve a RAP. Reproducible Analytics Pipelines (RAPs) are what everyone should be using for any research data project - see: https://nhsengland.github.io/nhs-r-reporting/tutorials/rap.html. However this is difficult to achieve. Particularly in a federated project like this. If you put non-standarised inputs into a project like this then you get non-standardised outputs and typically the workload for analysts is multiplied. A RAP solves that problem. Why Python? There are really only two viable options to achieve a RAP in a decentralised manner - R and Python (both combined with SQL in the backend). R is fab and contains many extremely powerful statistical packages and tidyverse for assembling data but it has some significant drawbacks - the biggest one being its smaller community leading to a more limited range of use-cases for the language. Python has significant drawbacks (like slow computation vs other languages like C++) but it has 3 major advantages which have enabled it to thrive: It is extremely easy to read and learn vs other languages. You can do almost anything with it (It is a true penknife lanugage). It has enormous machine learning and AI support. You can make an alternative case for R and some sites do use R for their research data engineering but we have gone with python here. If you would like to copy this pipeline and make an R version go for it - as long as the validation steps match it should work just as well. Starting out It is daunting starting out with a new language but the best way to learn is just to start using it. We recommend you use minicondas as it is free of licensing restrictions and is simple to set up. Please go to Minicondas Installers and download the appropriate distribution of it. I have run through this installation from start to scratch multiple times and it should work providing access is unblocked. If it doesn't please get in contact. But my Trust/University is Blocking me from installing it This is a common problem. Fortunately it is one easy to overcome if you know how. Firstly try installing it as an administrator but this will probably not work as it is probably being blocked by an insitutional policy / antivirus. You are working on a national collaboration helping the NHS backed by HDRUK. This gives you substantial leverage with your institution. If you approach your local IT infrastructure team (via service ticket / email) and explain why you need it in a way that makes sense to both of you they will unblock it for you. If you need to escalate it via a manager do so. The issues comes from blanket policies being applied without thinking about the downstream negative consequences. If you build a positive relationship with that team they will trust you and the roadblock will dissapear. You can also alternatively potentially get around the issue if you can install Docker on your local machine or access secure virtual machines elsewhere. If people need a guide on how to use that route then we can add it later on but we are keen to try and keep things as simple as possible and not add other tools in at this stage. Starting Minicondas Instructions: Open a command line / powershell or linux shell even windows terminal will work. Type the word 'activate' and the shell should change to display (base) at the root. Alternatively if you type 'prompt' in the search bar you should be able to launch a minicondas terminal directly that way. Downloading Repository You should navigate to Main Repo If you are new to this I recommend pressing the code button and downloading the zip file to your own machine and unzipping it there. If you want to do this in a more scalable manner I recommend cloning the repo to your local machine with the command: git clone https://github.com/MattStammers/hdruk_avoidable_admissions_collaboration_docs This single command will work well but you will need to download git if you don't have it yet. Go here to get it: Download Git Then you are ready to move on to stage 2.","title":"Step 1) New to Python?"},{"location":"how_to_guides/new_to_python/#why-bother-building-a-rap","text":"Before we go through how to set everything up we should probably explain why we are going to all this effort. The answer is to achieve a RAP. Reproducible Analytics Pipelines (RAPs) are what everyone should be using for any research data project - see: https://nhsengland.github.io/nhs-r-reporting/tutorials/rap.html. However this is difficult to achieve. Particularly in a federated project like this. If you put non-standarised inputs into a project like this then you get non-standardised outputs and typically the workload for analysts is multiplied. A RAP solves that problem.","title":"Why Bother Building a RAP?"},{"location":"how_to_guides/new_to_python/#why-python","text":"There are really only two viable options to achieve a RAP in a decentralised manner - R and Python (both combined with SQL in the backend). R is fab and contains many extremely powerful statistical packages and tidyverse for assembling data but it has some significant drawbacks - the biggest one being its smaller community leading to a more limited range of use-cases for the language. Python has significant drawbacks (like slow computation vs other languages like C++) but it has 3 major advantages which have enabled it to thrive: It is extremely easy to read and learn vs other languages. You can do almost anything with it (It is a true penknife lanugage). It has enormous machine learning and AI support. You can make an alternative case for R and some sites do use R for their research data engineering but we have gone with python here. If you would like to copy this pipeline and make an R version go for it - as long as the validation steps match it should work just as well.","title":"Why Python?"},{"location":"how_to_guides/new_to_python/#starting-out","text":"It is daunting starting out with a new language but the best way to learn is just to start using it. We recommend you use minicondas as it is free of licensing restrictions and is simple to set up. Please go to Minicondas Installers and download the appropriate distribution of it. I have run through this installation from start to scratch multiple times and it should work providing access is unblocked. If it doesn't please get in contact.","title":"Starting out"},{"location":"how_to_guides/new_to_python/#but-my-trustuniversity-is-blocking-me-from-installing-it","text":"This is a common problem. Fortunately it is one easy to overcome if you know how. Firstly try installing it as an administrator but this will probably not work as it is probably being blocked by an insitutional policy / antivirus. You are working on a national collaboration helping the NHS backed by HDRUK. This gives you substantial leverage with your institution. If you approach your local IT infrastructure team (via service ticket / email) and explain why you need it in a way that makes sense to both of you they will unblock it for you. If you need to escalate it via a manager do so. The issues comes from blanket policies being applied without thinking about the downstream negative consequences. If you build a positive relationship with that team they will trust you and the roadblock will dissapear. You can also alternatively potentially get around the issue if you can install Docker on your local machine or access secure virtual machines elsewhere. If people need a guide on how to use that route then we can add it later on but we are keen to try and keep things as simple as possible and not add other tools in at this stage.","title":"But my Trust/University is Blocking me from installing it"},{"location":"how_to_guides/new_to_python/#starting-minicondas","text":"Instructions: Open a command line / powershell or linux shell even windows terminal will work. Type the word 'activate' and the shell should change to display (base) at the root. Alternatively if you type 'prompt' in the search bar you should be able to launch a minicondas terminal directly that way.","title":"Starting Minicondas"},{"location":"how_to_guides/new_to_python/#downloading-repository","text":"You should navigate to Main Repo If you are new to this I recommend pressing the code button and downloading the zip file to your own machine and unzipping it there. If you want to do this in a more scalable manner I recommend cloning the repo to your local machine with the command: git clone https://github.com/MattStammers/hdruk_avoidable_admissions_collaboration_docs This single command will work well but you will need to download git if you don't have it yet. Go here to get it: Download Git Then you are ready to move on to stage 2.","title":"Downloading Repository"}]}